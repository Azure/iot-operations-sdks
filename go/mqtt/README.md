<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# mqtt

```go
import "github.com/Azure/iot-operations-sdks/go/mqtt"
```

## Index

- [func IsTopicFilterMatch\(topicFilter, topicName string\) bool](<#IsTopicFilterMatch>)
- [type Ack](<#Ack>)
- [type ClientState](<#ClientState>)
- [type ClientStateError](<#ClientStateError>)
  - [func \(e \*ClientStateError\) Error\(\) string](<#ClientStateError.Error>)
- [type ConnackError](<#ConnackError>)
  - [func \(e \*ConnackError\) Error\(\) string](<#ConnackError.Error>)
- [type ConnectEvent](<#ConnectEvent>)
- [type ConnectEventHandler](<#ConnectEventHandler>)
- [type ConnectionError](<#ConnectionError>)
  - [func \(e \*ConnectionError\) Error\(\) string](<#ConnectionError.Error>)
  - [func \(e \*ConnectionError\) Unwrap\(\) error](<#ConnectionError.Unwrap>)
- [type ConnectionProvider](<#ConnectionProvider>)
  - [func TCPConnection\(hostname string, port int\) ConnectionProvider](<#TCPConnection>)
  - [func TLSConnection\(hostname string, port int, tlsConfigProvider TLSConfigProvider\) ConnectionProvider](<#TLSConnection>)
- [type DisconnectError](<#DisconnectError>)
  - [func \(e \*DisconnectError\) Error\(\) string](<#DisconnectError.Error>)
- [type DisconnectEvent](<#DisconnectEvent>)
- [type DisconnectEventHandler](<#DisconnectEventHandler>)
- [type FatalConnackError](<#FatalConnackError>)
  - [func \(e \*FatalConnackError\) Error\(\) string](<#FatalConnackError.Error>)
- [type FatalDisconnectError](<#FatalDisconnectError>)
  - [func \(e \*FatalDisconnectError\) Error\(\) string](<#FatalDisconnectError.Error>)
- [type InvalidArgumentError](<#InvalidArgumentError>)
  - [func \(e \*InvalidArgumentError\) Error\(\) string](<#InvalidArgumentError.Error>)
  - [func \(e \*InvalidArgumentError\) Unwrap\(\) error](<#InvalidArgumentError.Unwrap>)
- [type InvalidOperationError](<#InvalidOperationError>)
  - [func \(e \*InvalidOperationError\) Error\(\) string](<#InvalidOperationError.Error>)
- [type Message](<#Message>)
- [type MessageHandler](<#MessageHandler>)
- [type PahoClient](<#PahoClient>)
- [type PahoConstructor](<#PahoConstructor>)
- [type PasswordProvider](<#PasswordProvider>)
  - [func ConstantPassword\(password \[\]byte\) PasswordProvider](<#ConstantPassword>)
  - [func FilePassword\(filename string\) PasswordProvider](<#FilePassword>)
- [type PublishOption](<#PublishOption>)
- [type PublishOptions](<#PublishOptions>)
- [type PublishQueueFullError](<#PublishQueueFullError>)
  - [func \(\*PublishQueueFullError\) Error\(\) string](<#PublishQueueFullError.Error>)
- [type SessionClient](<#SessionClient>)
  - [func NewSessionClient\(connectionProvider ConnectionProvider, opts ...SessionClientOption\) \(\*SessionClient, error\)](<#NewSessionClient>)
  - [func NewSessionClientFromConnectionString\(connStr string, opts ...SessionClientOption\) \(\*SessionClient, error\)](<#NewSessionClientFromConnectionString>)
  - [func NewSessionClientFromEnv\(opts ...SessionClientOption\) \(\*SessionClient, error\)](<#NewSessionClientFromEnv>)
  - [func \(c \*SessionClient\) ID\(\) string](<#SessionClient.ID>)
  - [func \(c \*SessionClient\) Publish\(ctx context.Context, topic string, payload \[\]byte, opts ...PublishOption\) \(\*Ack, error\)](<#SessionClient.Publish>)
  - [func \(c \*SessionClient\) RegisterConnectEventHandler\(handler ConnectEventHandler\) \(unregisterHandler func\(\)\)](<#SessionClient.RegisterConnectEventHandler>)
  - [func \(c \*SessionClient\) RegisterDisconnectEventHandler\(handler DisconnectEventHandler\) \(unregisterHandler func\(\)\)](<#SessionClient.RegisterDisconnectEventHandler>)
  - [func \(c \*SessionClient\) RegisterFatalErrorHandler\(handler func\(error\)\) \(unregisterHandler func\(\)\)](<#SessionClient.RegisterFatalErrorHandler>)
  - [func \(c \*SessionClient\) RegisterMessageHandler\(handler MessageHandler\) func\(\)](<#SessionClient.RegisterMessageHandler>)
  - [func \(c \*SessionClient\) Start\(\) error](<#SessionClient.Start>)
  - [func \(c \*SessionClient\) Stop\(\) error](<#SessionClient.Stop>)
  - [func \(c \*SessionClient\) Subscribe\(ctx context.Context, topic string, opts ...SubscribeOption\) \(\*Ack, error\)](<#SessionClient.Subscribe>)
  - [func \(c \*SessionClient\) Unsubscribe\(ctx context.Context, topic string, opts ...UnsubscribeOption\) \(\*Ack, error\)](<#SessionClient.Unsubscribe>)
- [type SessionClientOption](<#SessionClientOption>)
  - [func WithClientID\(clientID string\) SessionClientOption](<#WithClientID>)
  - [func WithConnRetry\(connRetry retry.Policy\) SessionClientOption](<#WithConnRetry>)
  - [func WithConnectPropertiesUser\(userProperties map\[string\]string\) SessionClientOption](<#WithConnectPropertiesUser>)
  - [func WithConnectionTimeout\(connectionTimeout time.Duration\) SessionClientOption](<#WithConnectionTimeout>)
  - [func WithFirstConnectionCleanStart\(firstConnectionCleanStart bool\) SessionClientOption](<#WithFirstConnectionCleanStart>)
  - [func WithKeepAlive\(keepAlive uint16\) SessionClientOption](<#WithKeepAlive>)
  - [func WithLogger\(l \*slog.Logger\) SessionClientOption](<#WithLogger>)
  - [func WithPahoConstructor\(pahoConstructor PahoConstructor\) SessionClientOption](<#WithPahoConstructor>)
  - [func WithPassword\(provider PasswordProvider\) SessionClientOption](<#WithPassword>)
  - [func WithReceiveMaximum\(receiveMaximum uint16\) SessionClientOption](<#WithReceiveMaximum>)
  - [func WithSessionExpiryInterval\(sessionExpiryInterval uint32\) SessionClientOption](<#WithSessionExpiryInterval>)
  - [func WithUserName\(provider UserNameProvider\) SessionClientOption](<#WithUserName>)
- [type SessionLostError](<#SessionLostError>)
  - [func \(\*SessionLostError\) Error\(\) string](<#SessionLostError.Error>)
- [type SubscribeOption](<#SubscribeOption>)
- [type SubscribeOptions](<#SubscribeOptions>)
- [type TLSConfigProvider](<#TLSConfigProvider>)
  - [func ConstantTLSConfig\(config \*tls.Config\) TLSConfigProvider](<#ConstantTLSConfig>)
- [type UnsubscribeOption](<#UnsubscribeOption>)
- [type UnsubscribeOptions](<#UnsubscribeOptions>)
- [type UserNameProvider](<#UserNameProvider>)
  - [func ConstantUserName\(userName string\) UserNameProvider](<#ConstantUserName>)
- [type WillMessage](<#WillMessage>)
- [type WillProperties](<#WillProperties>)
- [type WithContentType](<#WithContentType>)
- [type WithCorrelationData](<#WithCorrelationData>)
- [type WithMessageExpiry](<#WithMessageExpiry>)
- [type WithNoLocal](<#WithNoLocal>)
- [type WithPayloadFormat](<#WithPayloadFormat>)
- [type WithQoS](<#WithQoS>)
- [type WithResponseTopic](<#WithResponseTopic>)
- [type WithRetain](<#WithRetain>)
- [type WithRetainHandling](<#WithRetainHandling>)
- [type WithUserProperties](<#WithUserProperties>)


<a name="IsTopicFilterMatch"></a>
## func [IsTopicFilterMatch](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/topic_filter.go#L10>)

```go
func IsTopicFilterMatch(topicFilter, topicName string) bool
```

IsTopicFilterMatch checks if a topic name matches a topic filter.

<a name="Ack"></a>
## type [Ack](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L17>)



```go
type Ack = mqtt.Ack
```

<a name="ClientState"></a>
## type [ClientState](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L8>)

ClientState indicates the current state of the session client.

```go
type ClientState byte
```

<a name="NotStarted"></a>

```go
const (
    // The session client has not yet been started.
    NotStarted ClientState = iota

    // The session client has been started and has not yet been stopped by the
    // user or terminated due to a fatal error.
    Started

    // The session client has been stopped by the user or terminated due to a
    // fatal error.
    ShutDown
)
```

<a name="ClientStateError"></a>
## type [ClientStateError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L25-L27>)

ClientStateError is returned when the operation cannot proceed due to the state of the session client.

```go
type ClientStateError struct {
    State ClientState
}
```

<a name="ClientStateError.Error"></a>
### func \(\*ClientStateError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L29>)

```go
func (e *ClientStateError) Error() string
```



<a name="ConnackError"></a>
## type [ConnackError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L103-L105>)

ConnackError indicates that the session client received a CONNACK with a reason code that indicates an error but is not deemed to be fatal. It may appear as a fatal error if it is the final error returned once the session client has exhausted its connection retries.

```go
type ConnackError struct {
    ReasonCode byte
}
```

<a name="ConnackError.Error"></a>
### func \(\*ConnackError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L107>)

```go
func (e *ConnackError) Error() string
```



<a name="ConnectEvent"></a>
## type [ConnectEvent](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L13>)



```go
type ConnectEvent = mqtt.ConnectEvent
```

<a name="ConnectEventHandler"></a>
## type [ConnectEventHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L14>)



```go
type ConnectEventHandler = mqtt.ConnectEventHandler
```

<a name="ConnectionError"></a>
## type [ConnectionError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L83-L86>)

ConnectionError indicates that the session client has terminated due to an issue opening the network connection to the MQTT server. It may wrap an underlying error using Go standard error wrapping.

```go
type ConnectionError struct {
    // contains filtered or unexported fields
}
```

<a name="ConnectionError.Error"></a>
### func \(\*ConnectionError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L88>)

```go
func (e *ConnectionError) Error() string
```



<a name="ConnectionError.Unwrap"></a>
### func \(\*ConnectionError\) [Unwrap](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L95>)

```go
func (e *ConnectionError) Unwrap() error
```



<a name="ConnectionProvider"></a>
## type [ConnectionProvider](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/net.go#L18>)

ConnectionProvider is a function that returns a net.Conn connected to an MQTT server that is ready to read to and write from. Note that the returned net.Conn must be thread\-safe \(i.e., concurrent Write calls must not interleave\).

```go
type ConnectionProvider func(context.Context) (net.Conn, error)
```

<a name="TCPConnection"></a>
### func [TCPConnection](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/net.go#L22>)

```go
func TCPConnection(hostname string, port int) ConnectionProvider
```

TCPConnection is a ConnectionProvider that connects to an MQTT server over TCP.

<a name="TLSConnection"></a>
### func [TLSConnection](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/net.go#L58-L62>)

```go
func TLSConnection(hostname string, port int, tlsConfigProvider TLSConfigProvider) ConnectionProvider
```

TLSConnectionProviderWithConfigProvider is a ConnectionProvider that connects to an MQTT server with TLS over TCP given a TLSConfigProvider. This is an advanced option that most users will not need to use. Consider using TLSConnectionProviderWithConfig instead.

<a name="DisconnectError"></a>
## type [DisconnectError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L47-L49>)

DisconnectError indicates that the session client received a DISCONNECT packet from the server with a reason code that is not deemed to be fatal. It is primarily used for internal tracking and should not be expected by users except in rare cases in logs.

```go
type DisconnectError struct {
    ReasonCode byte
}
```

<a name="DisconnectError.Error"></a>
### func \(\*DisconnectError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L51>)

```go
func (e *DisconnectError) Error() string
```



<a name="DisconnectEvent"></a>
## type [DisconnectEvent](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L15>)



```go
type DisconnectEvent = mqtt.DisconnectEvent
```

<a name="DisconnectEventHandler"></a>
## type [DisconnectEventHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L16>)



```go
type DisconnectEventHandler = mqtt.DisconnectEventHandler
```

<a name="FatalConnackError"></a>
## type [FatalConnackError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L116-L118>)

FatalConnackError indicates that the session client has terminated due to receiving a CONNACK with with a reason code that is deemed to be fatal.

```go
type FatalConnackError struct {
    ReasonCode byte
}
```

<a name="FatalConnackError.Error"></a>
### func \(\*FatalConnackError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L120>)

```go
func (e *FatalConnackError) Error() string
```



<a name="FatalDisconnectError"></a>
## type [FatalDisconnectError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L61-L63>)

FatalDisconnectError indicates that the session client has terminated due to receiving a DISCONNECT packet from the server with a reason code that is deemed to be fatal.

```go
type FatalDisconnectError struct {
    ReasonCode byte
}
```

<a name="FatalDisconnectError.Error"></a>
### func \(\*FatalDisconnectError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L65>)

```go
func (e *FatalDisconnectError) Error() string
```



<a name="InvalidArgumentError"></a>
## type [InvalidArgumentError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L130-L133>)

InvalidArgumentError indicates that the user has provided an invalid value for an option. It may wrap an underlying error using Go standard error wrapping.

```go
type InvalidArgumentError struct {
    // contains filtered or unexported fields
}
```

<a name="InvalidArgumentError.Error"></a>
### func \(\*InvalidArgumentError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L135>)

```go
func (e *InvalidArgumentError) Error() string
```



<a name="InvalidArgumentError.Unwrap"></a>
### func \(\*InvalidArgumentError\) [Unwrap](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L142>)

```go
func (e *InvalidArgumentError) Unwrap() error
```



<a name="InvalidOperationError"></a>
## type [InvalidOperationError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L159-L161>)

InvalidOperationError is returned if the user attempts to make a function call that is invalid \(e.g., attempting to ack a QoS 0 message\).

```go
type InvalidOperationError struct {
    // contains filtered or unexported fields
}
```

<a name="InvalidOperationError.Error"></a>
### func \(\*InvalidOperationError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L163>)

```go
func (e *InvalidOperationError) Error() string
```



<a name="Message"></a>
## type [Message](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L11>)



```go
type Message = mqtt.Message
```

<a name="MessageHandler"></a>
## type [MessageHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L12>)



```go
type MessageHandler = mqtt.MessageHandler
```

<a name="PahoClient"></a>
## type [PahoClient](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/client.go#L37-L75>)

PahoClient is the interface for the underlying MQTTv5 client used by ManagedClient, intended for future client swapping and testing purpose. Currently, the Paho client serves as the core implementation.

```go
type PahoClient interface {
    Connect(
        ctx context.Context,
        packet *paho.Connect,
    ) (*paho.Connack, error)

    Disconnect(
        packet *paho.Disconnect,
    ) error

    Subscribe(
        ctx context.Context,
        packet *paho.Subscribe,
    ) (*paho.Suback, error)

    Unsubscribe(
        ctx context.Context,
        packet *paho.Unsubscribe,
    ) (*paho.Unsuback, error)

    PublishWithOptions(
        ctx context.Context,
        packet *paho.Publish,
        options paho.PublishOptions,
    ) (*paho.PublishResponse, error)

    AddOnPublishReceived(
        f func(paho.PublishReceived) (bool, error),
    ) func()

    Ack(
        pb *paho.Publish,
    ) error

    Authenticate(
        ctx context.Context,
        auth *paho.Auth,
    ) (*paho.AuthResponse, error)
}
```

<a name="PahoConstructor"></a>
## type [PahoConstructor](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/client.go#L78-L81>)

PahoConstructor creates a PahoClient from a config.

```go
type PahoConstructor = func(
    context.Context,
    *paho.ClientConfig,
) (PahoClient, error)
```

<a name="PasswordProvider"></a>
## type [PasswordProvider](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L119>)

PasswordProvider is a function that returns an MQTT Password and Password Flag. Note that if the return value passwordFlag is false, the return value password is ignored.

```go
type PasswordProvider func(context.Context) (password []byte, passwordFlag bool, err error)
```

<a name="ConstantPassword"></a>
### func [ConstantPassword](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L140>)

```go
func ConstantPassword(password []byte) PasswordProvider
```

ConstantPassword is a PasswordProvider implementation that returns an unchanging Password. This can be used if the Password does not need to be updated between MQTT connections.

<a name="FilePassword"></a>
### func [FilePassword](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L148>)

```go
func FilePassword(filename string) PasswordProvider
```

FilePassword is a PasswordProvider implementation that reads an MQTT Password from a given filename for each MQTT connection.

<a name="PublishOption"></a>
## type [PublishOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L24>)



```go
type PublishOption = mqtt.PublishOption
```

<a name="PublishOptions"></a>
## type [PublishOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L23>)



```go
type PublishOptions = mqtt.PublishOptions
```

<a name="PublishQueueFullError"></a>
## type [PublishQueueFullError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L151>)

PublishQueueFullError is returned if there are too many publishes enqueued and the session client is not accepting any more. This should very rarely occur, and if it does, it is a sign that either the connection is unstable or the application is sending messages at a faster rate than can be handled by the session client or server.

```go
type PublishQueueFullError struct{}
```

<a name="PublishQueueFullError.Error"></a>
### func \(\*PublishQueueFullError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L153>)

```go
func (*PublishQueueFullError) Error() string
```



<a name="SessionClient"></a>
## type [SessionClient](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client.go#L20-L60>)

SessionClient implements an MQTT Session client supporting MQTT v5 with QoS 0 and QoS 1 support.

```go
type SessionClient struct {
    // contains filtered or unexported fields
}
```

<a name="NewSessionClient"></a>
### func [NewSessionClient](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client.go#L92-L95>)

```go
func NewSessionClient(connectionProvider ConnectionProvider, opts ...SessionClientOption) (*SessionClient, error)
```

NewSessionClient constructs a new session client with user options.

<a name="NewSessionClientFromConnectionString"></a>
### func [NewSessionClientFromConnectionString](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client.go#L137-L140>)

```go
func NewSessionClientFromConnectionString(connStr string, opts ...SessionClientOption) (*SessionClient, error)
```

NewSessionClientFromConnectionString constructs a new session client from a user\-defined connection string. Note that values from the connection string take priority over any functional options.

<a name="NewSessionClientFromEnv"></a>
### func [NewSessionClientFromEnv](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client.go#L153-L155>)

```go
func NewSessionClientFromEnv(opts ...SessionClientOption) (*SessionClient, error)
```

NewSessionClientFromEnv constructs a new session client from user's environment variables. Note that values from environment variables take priorty over any functional options.

<a name="SessionClient.ID"></a>
### func \(\*SessionClient\) [ID](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client.go#L165>)

```go
func (c *SessionClient) ID() string
```



<a name="SessionClient.Publish"></a>
### func \(\*SessionClient\) [Publish](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/publish.go#L113-L118>)

```go
func (c *SessionClient) Publish(ctx context.Context, topic string, payload []byte, opts ...PublishOption) (*Ack, error)
```



<a name="SessionClient.RegisterConnectEventHandler"></a>
### func \(\*SessionClient\) [RegisterConnectEventHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/connect.go#L19-L21>)

```go
func (c *SessionClient) RegisterConnectEventHandler(handler ConnectEventHandler) (unregisterHandler func())
```

RegisterConnectEventHandler registers a handler to a list of handlers that are called synchronously in registration order whenever the session client successfully establishes an MQTT connection. Note that since the handler gets called synchronously, handlers should not block for an extended period of time to avoid blocking the session client.

<a name="SessionClient.RegisterDisconnectEventHandler"></a>
### func \(\*SessionClient\) [RegisterDisconnectEventHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/connect.go#L30-L32>)

```go
func (c *SessionClient) RegisterDisconnectEventHandler(handler DisconnectEventHandler) (unregisterHandler func())
```

RegisterDisconnectEventHandler registers a handler to a list of handlers that are called synchronously in registration order whenever the session client detects a disconnection from the MQTT server. Note that since the handler gets called synchronously, handlers should not block for an extended period of time to avoid blocking the session client.

<a name="SessionClient.RegisterFatalErrorHandler"></a>
### func \(\*SessionClient\) [RegisterFatalErrorHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/connect.go#L38-L40>)

```go
func (c *SessionClient) RegisterFatalErrorHandler(handler func(error)) (unregisterHandler func())
```

RegisterFatalErrorHandler registers a handler that is called in a goroutine if the session client terminates due to a fatal error.

<a name="SessionClient.RegisterMessageHandler"></a>
### func \(\*SessionClient\) [RegisterMessageHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/subscribe.go#L70>)

```go
func (c *SessionClient) RegisterMessageHandler(handler MessageHandler) func()
```

RegisterMessageHandler registers a message handler on this client. Returns a callback to remove the message handler.

<a name="SessionClient.Start"></a>
### func \(\*SessionClient\) [Start](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/connect.go#L47>)

```go
func (c *SessionClient) Start() error
```

Start starts the session client, spawning any necessary background goroutines. In order to terminate the session client and clean up any running goroutines, Stop\(\) must be called after calling Start\(\).

<a name="SessionClient.Stop"></a>
### func \(\*SessionClient\) [Stop](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/connect.go#L72>)

```go
func (c *SessionClient) Stop() error
```

Stop stops the session client, terminating any pending operations and cleaning up background goroutines.

<a name="SessionClient.Subscribe"></a>
### func \(\*SessionClient\) [Subscribe](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/subscribe.go#L81-L85>)

```go
func (c *SessionClient) Subscribe(ctx context.Context, topic string, opts ...SubscribeOption) (*Ack, error)
```



<a name="SessionClient.Unsubscribe"></a>
### func \(\*SessionClient\) [Unsubscribe](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/subscribe.go#L123-L127>)

```go
func (c *SessionClient) Unsubscribe(ctx context.Context, topic string, opts ...UnsubscribeOption) (*Ack, error)
```



<a name="SessionClientOption"></a>
## type [SessionClientOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L16>)



```go
type SessionClientOption func(*SessionClient)
```

<a name="WithClientID"></a>
### func [WithClientID](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L74-L76>)

```go
func WithClientID(clientID string) SessionClientOption
```

WithClientID sets MQTT Client Identifier.

<a name="WithConnRetry"></a>
### func [WithConnRetry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L63-L65>)

```go
func WithConnRetry(connRetry retry.Policy) SessionClientOption
```

WithConnRetry sets the connection retry policy for the MQTT session client.

<a name="WithConnectPropertiesUser"></a>
### func [WithConnectPropertiesUser](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L209-L211>)

```go
func WithConnectPropertiesUser(userProperties map[string]string) SessionClientOption
```

WithConnectPropertiesUser sets the user properties for the CONNECT packet.

<a name="WithConnectionTimeout"></a>
### func [WithConnectionTimeout](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L194-L196>)

```go
func WithConnectionTimeout(connectionTimeout time.Duration) SessionClientOption
```

WithConnectionTimeout sets the connection timeout.

<a name="WithFirstConnectionCleanStart"></a>
### func [WithFirstConnectionCleanStart](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L52-L54>)

```go
func WithFirstConnectionCleanStart(firstConnectionCleanStart bool) SessionClientOption
```

WithFirstConnectionCleanStart sets the value of Clean Start in the CONNECT packet for the first connection. Note that Clean Start will always be false on reconnections.

This setting is true by default, and it should not be changed unless you are aware of the implications. If there is a possibility of a session on the MQTT server for this Client ID with inflight QoS 1\+ PUBLISHes or QoS 2 SUBSCRIBEs, it may result in message loss and/or MQTT protocol violations.

<a name="WithKeepAlive"></a>
### func [WithKeepAlive](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L161-L163>)

```go
func WithKeepAlive(keepAlive uint16) SessionClientOption
```

WithKeepAlive sets the keepAlive interval for the MQTT connection.

<a name="WithLogger"></a>
### func [WithLogger](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L21-L23>)

```go
func WithLogger(l *slog.Logger) SessionClientOption
```

WithLogger sets the logger for the MQTT session client.

<a name="WithPahoConstructor"></a>
### func [WithPahoConstructor](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L221-L223>)

```go
func WithPahoConstructor(pahoConstructor PahoConstructor) SessionClientOption
```

WithPahoConstructor replaces the default Paho constructor with a custom one for testing.

<a name="WithPassword"></a>
### func [WithPassword](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L123>)

```go
func WithPassword(provider PasswordProvider) SessionClientOption
```

WithPassword sets the PasswordProvider that the SessionClient uses to get the MQTT Password for each MQTT connection.

<a name="WithReceiveMaximum"></a>
### func [WithReceiveMaximum](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L183-L185>)

```go
func WithReceiveMaximum(receiveMaximum uint16) SessionClientOption
```

WithReceiveMaximum sets the MQTT client\-side Receive Maximum.

<a name="WithSessionExpiryInterval"></a>
### func [WithSessionExpiryInterval](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L172-L174>)

```go
func WithSessionExpiryInterval(sessionExpiryInterval uint32) SessionClientOption
```

WithSessionExpiryInterval sets the MQTT Session Expiry Interval.

<a name="WithUserName"></a>
### func [WithUserName](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L91>)

```go
func WithUserName(provider UserNameProvider) SessionClientOption
```

WithUserName sets the UserNameProvider that the SessionClient uses to get the MQTT User Name for each MQTT connection.

<a name="SessionLostError"></a>
## type [SessionLostError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L74>)

SessionLostError indicates that the session client has terminated due to receiving a CONNACK with session present false when reconnecting.

```go
type SessionLostError struct{}
```

<a name="SessionLostError.Error"></a>
### func \(\*SessionLostError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/errors.go#L76>)

```go
func (*SessionLostError) Error() string
```



<a name="SubscribeOption"></a>
## type [SubscribeOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L20>)



```go
type SubscribeOption = mqtt.SubscribeOption
```

<a name="SubscribeOptions"></a>
## type [SubscribeOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L19>)



```go
type SubscribeOptions = mqtt.SubscribeOptions
```

<a name="TLSConfigProvider"></a>
## type [TLSConfigProvider](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/net.go#L43>)

TLSConfigProvider is a function that returns a \*tls.Config to be used when opening a TLS connection to an MQTT server. See tls.Config for more information on TLS configuration options.

```go
type TLSConfigProvider func(context.Context) (*tls.Config, error)
```

<a name="ConstantTLSConfig"></a>
### func [ConstantTLSConfig](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/net.go#L48>)

```go
func ConstantTLSConfig(config *tls.Config) TLSConfigProvider
```

ConstantTLSConfig is a TLSConfigProvider that returns an unchanging \*tls.Config. This can be used if the TLS configuration does not need to be updated between network connections to the MQTT server.

<a name="UnsubscribeOption"></a>
## type [UnsubscribeOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L22>)



```go
type UnsubscribeOption = mqtt.UnsubscribeOption
```

<a name="UnsubscribeOptions"></a>
## type [UnsubscribeOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L21>)



```go
type UnsubscribeOptions = mqtt.UnsubscribeOptions
```

<a name="UserNameProvider"></a>
## type [UserNameProvider](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L87>)

UserNameProvider is a function that returns an MQTT User Name and User Name Flag. Note that if the return value userNameFlag is false, the return value userName is ignored.

```go
type UserNameProvider func(context.Context) (userName string, userNameFlag bool, err error)
```

<a name="ConstantUserName"></a>
### func [ConstantUserName](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/session_client_options.go#L108>)

```go
func ConstantUserName(userName string) UserNameProvider
```

ConstantUserName is a UserNameProvider implementation that returns an unchanging User Name. This can be used if the User Name does not need to be updated between MQTT connections.

<a name="WillMessage"></a>
## type [WillMessage](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/client.go#L15-L20>)

WillMessage is a representation of the LWT message that can be sent with the Connect packet.

```go
type WillMessage struct {
    Retain  bool
    QoS     byte
    Topic   string
    Payload []byte
}
```

<a name="WillProperties"></a>
## type [WillProperties](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/client.go#L24-L32>)

WillProperties is a struct of the properties that can be set for a Will in a Connect packet.

```go
type WillProperties struct {
    PayloadFormat     byte
    WillDelayInterval time.Duration
    MessageExpiry     time.Duration
    ContentType       string
    ResponseTopic     string
    CorrelationData   []byte
    User              map[string]string
}
```

<a name="WithContentType"></a>
## type [WithContentType](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L26>)



```go
type WithContentType = mqtt.WithContentType
```

<a name="WithCorrelationData"></a>
## type [WithCorrelationData](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L27>)



```go
type WithCorrelationData = mqtt.WithCorrelationData
```

<a name="WithMessageExpiry"></a>
## type [WithMessageExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L28>)



```go
type WithMessageExpiry = mqtt.WithMessageExpiry
```

<a name="WithNoLocal"></a>
## type [WithNoLocal](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L29>)



```go
type WithNoLocal = mqtt.WithNoLocal
```

<a name="WithPayloadFormat"></a>
## type [WithPayloadFormat](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L30>)



```go
type WithPayloadFormat = mqtt.WithPayloadFormat
```

<a name="WithQoS"></a>
## type [WithQoS](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L31>)



```go
type WithQoS = mqtt.WithQoS
```

<a name="WithResponseTopic"></a>
## type [WithResponseTopic](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L32>)



```go
type WithResponseTopic = mqtt.WithResponseTopic
```

<a name="WithRetain"></a>
## type [WithRetain](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L33>)



```go
type WithRetain = mqtt.WithRetain
```

<a name="WithRetainHandling"></a>
## type [WithRetainHandling](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L34>)



```go
type WithRetainHandling = mqtt.WithRetainHandling
```

<a name="WithUserProperties"></a>
## type [WithUserProperties](<https://github.com/Azure/iot-operations-sdks/blob/main/go/mqtt/alias.go#L35>)



```go
type WithUserProperties = mqtt.WithUserProperties
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

```go
import "github.com/Azure/iot-operations-sdks/go/services/leasedlock"
```

## Index

- [type Bytes](<#Bytes>)
- [type Lock](<#Lock>)
  - [func New\[K, V Bytes\]\(client \*statestore.Client\[K, V\], name K\) \*Lock\[K, V\]](<#New>)
  - [func \(l \*Lock\[K, V\]\) Acquire\(ctx context.Context, duration time.Duration, opt ...Option\) \(hlc.HybridLogicalClock, error\)](<#Lock[K, V].Acquire>)
  - [func \(l \*Lock\[K, V\]\) Edit\(ctx context.Context, key K, duration time.Duration, edit func\(context.Context, V\) \(V, error\), opt ...Option\) error](<#Lock[K, V].Edit>)
  - [func \(l \*Lock\[K, V\]\) Holder\(ctx context.Context, opt ...Option\) \(string, error\)](<#Lock[K, V].Holder>)
  - [func \(l \*Lock\[K, V\]\) Release\(ctx context.Context, opt ...Option\) \(bool, error\)](<#Lock[K, V].Release>)
  - [func \(l \*Lock\[K, V\]\) TryAcquire\(ctx context.Context, duration time.Duration, opt ...Option\) \(hlc.HybridLogicalClock, error\)](<#Lock[K, V].TryAcquire>)
- [type Option](<#Option>)
- [type Options](<#Options>)
  - [func \(o \*Options\) Apply\(opts \[\]Option, rest ...Option\)](<#Options.Apply>)
- [type WithSessionID](<#WithSessionID>)
- [type WithTimeout](<#WithTimeout>)


<a name="Bytes"></a>
## type [Bytes](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/lock.go#L15>)

Bytes represents generic byte data.

```go
type Bytes = statestore.Bytes
```

<a name="Lock"></a>
## type [Lock](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/lock.go#L18-L22>)

Lock provides a leased lock based on an underlying state store.

```go
type Lock[K, V Bytes] struct {
    Name K
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/lock.go#L27>)

```go
func New[K, V Bytes](client *statestore.Client[K, V], name K) *Lock[K, V]
```

New creates a new leased lock from an underlying state store client and a lock name.

<a name="Lock[K, V].Acquire"></a>
### func \(\*Lock\[K, V\]\) [Acquire](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/lock.go#L65-L69>)

```go
func (l *Lock[K, V]) Acquire(ctx context.Context, duration time.Duration, opt ...Option) (hlc.HybridLogicalClock, error)
```

Acquire the lock and return its fencing token. Note that cancelling the context passed to this method will prevent the lock notification from stopping; it is recommended to use WithTimeout instead.

<a name="Lock[K, V].Edit"></a>
### func \(\*Lock\[K, V\]\) [Edit](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/edit.go#L13-L19>)

```go
func (l *Lock[K, V]) Edit(ctx context.Context, key K, duration time.Duration, edit func(context.Context, V) (V, error), opt ...Option) error
```

Edit a key under the protection of this lock.

<a name="Lock[K, V].Holder"></a>
### func \(\*Lock\[K, V\]\) [Holder](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/lock.go#L140-L143>)

```go
func (l *Lock[K, V]) Holder(ctx context.Context, opt ...Option) (string, error)
```

Holder gets the current holder of the lock, if any. An empty value indicates that there is no current lock holder.

<a name="Lock[K, V].Release"></a>
### func \(\*Lock\[K, V\]\) [Release](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/lock.go#L124-L127>)

```go
func (l *Lock[K, V]) Release(ctx context.Context, opt ...Option) (bool, error)
```

Release the lock. Returns a boolean indicating whether the lock was successfully released \(e.g. whether the lock had been acquired\).

<a name="Lock[K, V].TryAcquire"></a>
### func \(\*Lock\[K, V\]\) [TryAcquire](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/lock.go#L40-L44>)

```go
func (l *Lock[K, V]) TryAcquire(ctx context.Context, duration time.Duration, opt ...Option) (hlc.HybridLogicalClock, error)
```

TryAcquire performs a single attempt to acquire the lock, returning a nonzero fencing token if successful.

<a name="Option"></a>
## type [Option](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/options.go#L14>)

Option represents a single option for the lock requests.

```go
type Option interface {
    // contains filtered or unexported methods
}
```

<a name="Options"></a>
## type [Options](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/options.go#L17-L20>)

Options are the resolved options for the lock requests.

```go
type Options struct {
    Timeout   time.Duration
    SessionID string
}
```

<a name="Options.Apply"></a>
### func \(\*Options\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/options.go#L31-L34>)

```go
func (o *Options) Apply(opts []Option, rest ...Option)
```

Apply resolves the provided list of options.

<a name="WithSessionID"></a>
## type [WithSessionID](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/options.go#L27>)

WithSessionID adds an optional session ID suffix to the lock holder to allow distinct locks on the same key with the same MQTT client.

```go
type WithSessionID string
```

<a name="WithTimeout"></a>
## type [WithTimeout](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/leasedlock/options.go#L23>)

WithTimeout adds a timeout to the request \(with second precision\).

```go
type WithTimeout time.Duration
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# statestore

```go
import "github.com/Azure/iot-operations-sdks/go/services/statestore"
```

## Index

- [Variables](<#variables>)
- [type ArgumentError](<#ArgumentError>)
- [type Client](<#Client>)
  - [func New\(client mqtt.Client\) \(\*Client, error\)](<#New>)
  - [func \(c \*Client\) Del\(ctx context.Context, key string\) \(\*Response\[bool\], error\)](<#Client.Del>)
  - [func \(c \*Client\) Get\(ctx context.Context, key string\) \(\*Response\[\[\]byte\], error\)](<#Client.Get>)
  - [func \(c \*Client\) Listen\(ctx context.Context\) \(func\(\), error\)](<#Client.Listen>)
  - [func \(c \*Client\) Set\(ctx context.Context, key string, val \[\]byte, opt ...SetOption\) \(\*Response\[bool\], error\)](<#Client.Set>)
  - [func \(c \*Client\) Vdel\(ctx context.Context, key string, val \[\]byte\) \(\*Response\[bool\], error\)](<#Client.Vdel>)
- [type Condition](<#Condition>)
- [type PayloadError](<#PayloadError>)
- [type Response](<#Response>)
- [type ResponseError](<#ResponseError>)
- [type SetOption](<#SetOption>)
- [type SetOptions](<#SetOptions>)
  - [func \(o \*SetOptions\) Apply\(opts \[\]SetOption, rest ...SetOption\)](<#SetOptions.Apply>)
- [type WithCondition](<#WithCondition>)
- [type WithExpiry](<#WithExpiry>)
- [type WithFencingToken](<#WithFencingToken>)


## Variables

<a name="ErrResponse"></a>

```go
var (
    ErrResponse = errors.ErrResponse
    ErrPayload  = errors.ErrPayload
    ErrArgument = errors.ErrArgument
)
```

<a name="ArgumentError"></a>
## type [ArgumentError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L30>)



```go
type ArgumentError = errors.Argument
```

<a name="Client"></a>
## type [Client](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L16-L18>)

Client represents a client of the state store.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L40>)

```go
func New(client mqtt.Client) (*Client, error)
```

New creates a new state store client.

<a name="Client.Del"></a>
### func \(\*Client\) [Del](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L116-L119>)

```go
func (c *Client) Del(ctx context.Context, key string) (*Response[bool], error)
```

Del deletes the value of the given key. If the key was present, it returns true and the stored version of the key; otherwise, it returns false and a zero version.

<a name="Client.Get"></a>
### func \(\*Client\) [Get](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L106-L109>)

```go
func (c *Client) Get(ctx context.Context, key string) (*Response[[]byte], error)
```

Get the value and version of the given key. If the key is not present, it returns nil and a zero version; if the key is present but empty, it returns an empty slice and the stored version.

<a name="Client.Listen"></a>
### func \(\*Client\) [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L63>)

```go
func (c *Client) Listen(ctx context.Context) (func(), error)
```

Listen to the response topic\(s\). Returns a function to stop listening. Must be called before any state store methods. Note that cancelling this context will cause the unsubscribe call to fail.

<a name="Client.Set"></a>
### func \(\*Client\) [Set](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L70-L75>)

```go
func (c *Client) Set(ctx context.Context, key string, val []byte, opt ...SetOption) (*Response[bool], error)
```

Set the value of the given key. If the key is successfully set, it returns true and the new or updated version; if the key is not set due to the specified condition, it returns false and the stored version.

<a name="Client.Vdel"></a>
### func \(\*Client\) [Vdel](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L126-L130>)

```go
func (c *Client) Vdel(ctx context.Context, key string, val []byte) (*Response[bool], error)
```

Vdel deletes the value of the given key if it is equal to the given value. If the key was present and the value matched, it returns true and the stored version of the key; otherwise, it returns false and a zero version.

<a name="Condition"></a>
## type [Condition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L21>)

Condition specifies the conditions under which the key will be set.

```go
type Condition string
```

<a name="Always"></a>

```go
const (
    // Always indicates that the key should always be set to the provided value.
    // This is the default.
    Always Condition = ""

    // NotExists indicates that the key should only be set if it does not exist.
    NotExists Condition = "NX"

    // NotExistOrEqual indicates that the key should only be set if it does not
    // exist or is equal to the set value. This is typically used to update the
    // expiry on the key.
    NotExistsOrEqual Condition = "NEX"
)
```

<a name="PayloadError"></a>
## type [PayloadError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L29>)



```go
type PayloadError = errors.Payload
```

<a name="Response"></a>
## type [Response](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L23-L26>)

Response represents a state store response, which will include a value depending on the method and the stored version returned for the key \(if any\).

```go
type Response[T any] struct {
    Value   T
    Version hlc.HybridLogicalClock
}
```

<a name="ResponseError"></a>
## type [ResponseError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L28>)



```go
type ResponseError = errors.Response
```

<a name="SetOption"></a>
## type [SetOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L11>)

SetOption represents a single option for the Set method.

```go
type SetOption interface {
    // contains filtered or unexported methods
}
```

<a name="SetOptions"></a>
## type [SetOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L14-L18>)

SetOptions are the resolved options for the Set method.

```go
type SetOptions struct {
    Condition    Condition
    Expiry       time.Duration
    FencingToken hlc.HybridLogicalClock
}
```

<a name="SetOptions.Apply"></a>
### func \(\*SetOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L51-L54>)

```go
func (o *SetOptions) Apply(opts []SetOption, rest ...SetOption)
```

Apply resolves the provided list of options.

<a name="WithCondition"></a>
## type [WithCondition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L25>)

WithCondition indicates that the key should only be set under the given conditions.

```go
type WithCondition Condition
```

<a name="WithExpiry"></a>
## type [WithExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L29>)

WithExpiry indicates that the key should expire after the given duration \(with millisecond precision\).

```go
type WithExpiry time.Duration
```

<a name="WithFencingToken"></a>
## type [WithFencingToken](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L33>)

WithFencingToken adds a fencing token to the set request to provide lock ownership checking.

```go
type WithFencingToken hlc.HybridLogicalClock
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

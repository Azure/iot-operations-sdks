<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# statestore

```go
import "github.com/Azure/iot-operations-sdks/go/services/statestore"
```

## Index

- [Variables](<#variables>)
- [type ArgumentError](<#ArgumentError>)
- [type Bytes](<#Bytes>)
- [type Client](<#Client>)
  - [func New\[K, V Bytes\]\(client protocol.MqttClient, opt ...ClientOption\) \(\*Client\[K, V\], error\)](<#New>)
  - [func \(c \*Client\[K, V\]\) Del\(ctx context.Context, key K, opt ...DelOption\) \(\*Response\[int\], error\)](<#Client[K, V].Del>)
  - [func \(c \*Client\[K, V\]\) Get\(ctx context.Context, key K, opt ...GetOption\) \(\*Response\[V\], error\)](<#Client[K, V].Get>)
  - [func \(c \*Client\[K, V\]\) Set\(ctx context.Context, key K, val V, opt ...SetOption\) \(\*Response\[bool\], error\)](<#Client[K, V].Set>)
  - [func \(c \*Client\[K, V\]\) VDel\(ctx context.Context, key K, val V, opt ...VDelOption\) \(\*Response\[int\], error\)](<#Client[K, V].VDel>)
- [type ClientOption](<#ClientOption>)
  - [func WithLogger\(logger \*slog.Logger\) ClientOption](<#WithLogger>)
- [type ClientOptions](<#ClientOptions>)
  - [func \(o \*ClientOptions\) Apply\(opts \[\]ClientOption, rest ...ClientOption\)](<#ClientOptions.Apply>)
- [type Condition](<#Condition>)
- [type DelOption](<#DelOption>)
- [type DelOptions](<#DelOptions>)
  - [func \(o \*DelOptions\) Apply\(opts \[\]DelOption, rest ...DelOption\)](<#DelOptions.Apply>)
- [type GetOption](<#GetOption>)
- [type GetOptions](<#GetOptions>)
  - [func \(o \*GetOptions\) Apply\(opts \[\]GetOption, rest ...GetOption\)](<#GetOptions.Apply>)
- [type PayloadError](<#PayloadError>)
- [type Response](<#Response>)
- [type ServiceError](<#ServiceError>)
- [type SetOption](<#SetOption>)
- [type SetOptions](<#SetOptions>)
  - [func \(o \*SetOptions\) Apply\(opts \[\]SetOption, rest ...SetOption\)](<#SetOptions.Apply>)
- [type VDelOption](<#VDelOption>)
- [type VDelOptions](<#VDelOptions>)
  - [func \(o \*VDelOptions\) Apply\(opts \[\]VDelOption, rest ...VDelOption\)](<#VDelOptions.Apply>)
- [type WithCondition](<#WithCondition>)
- [type WithExpiry](<#WithExpiry>)
- [type WithFencingToken](<#WithFencingToken>)
- [type WithTimeout](<#WithTimeout>)


## Variables

<a name="ErrService"></a>

```go
var (
    ErrService  = errors.ErrService
    ErrPayload  = errors.ErrPayload
    ErrArgument = errors.ErrArgument
)
```

<a name="ArgumentError"></a>
## type [ArgumentError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L43>)



```go
type ArgumentError = errors.Argument
```

<a name="Bytes"></a>
## type [Bytes](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L17>)

Bytes represents generic byte data.

```go
type Bytes interface {
    // contains filtered or unexported methods
}
```

<a name="Client"></a>
## type [Client](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L20-L23>)

Client represents a client of the state store.

```go
type Client[K, V Bytes] struct {
    protocol.Listeners
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L58-L61>)

```go
func New[K, V Bytes](client protocol.MqttClient, opt ...ClientOption) (*Client[K, V], error)
```

New creates a new state store client. It takes the key and value types as parameters to avoid unnecessary casting; both may be string, \[\]byte, or equivalent types.

<a name="Client[K, V].Del"></a>
### func \(\*Client\[K, V\]\) [Del](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L30-L34>)

```go
func (c *Client[K, V]) Del(ctx context.Context, key K, opt ...DelOption) (*Response[int], error)
```

Del deletes the given key. It returns the number of keys deleted \(typically 0 or 1\).

<a name="Client[K, V].Get"></a>
### func \(\*Client\[K, V\]\) [Get](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L29-L33>)

```go
func (c *Client[K, V]) Get(ctx context.Context, key K, opt ...GetOption) (*Response[V], error)
```

Get the value and version of the given key. If the key is not present, it returns a fully zero response struct; if the key is present but empty, it returns an empty value and the stored version.

<a name="Client[K, V].Set"></a>
### func \(\*Client\[K, V\]\) [Set](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L37-L42>)

```go
func (c *Client[K, V]) Set(ctx context.Context, key K, val V, opt ...SetOption) (*Response[bool], error)
```

Set the value of the given key. If the key is successfully set, it returns true and the new or updated version; if the key is not set due to the specified condition, it returns false and the stored version.

<a name="Client[K, V].VDel"></a>
### func \(\*Client\[K, V\]\) [VDel](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L31-L36>)

```go
func (c *Client[K, V]) VDel(ctx context.Context, key K, val V, opt ...VDelOption) (*Response[int], error)
```

VDel deletes the given key if it is equal to the given value. It returns the number of values deleted \(typically 0 or 1\) or \-1 if the key was present but did not match the given value.

<a name="ClientOption"></a>
## type [ClientOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L26>)

ClientOption represents a single option for the client.

```go
type ClientOption interface {
    // contains filtered or unexported methods
}
```

<a name="WithLogger"></a>
### func [WithLogger](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L163>)

```go
func WithLogger(logger *slog.Logger) ClientOption
```

WithLogger enables logging with the provided slog logger.

<a name="ClientOptions"></a>
## type [ClientOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L29-L31>)

ClientOptions are the resolved options for the client.

```go
type ClientOptions struct {
    Logger *slog.Logger
}
```

<a name="ClientOptions.Apply"></a>
### func \(\*ClientOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L140-L143>)

```go
func (o *ClientOptions) Apply(opts []ClientOption, rest ...ClientOption)
```

Apply resolves the provided list of options.

<a name="Condition"></a>
## type [Condition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L14>)

Condition specifies the conditions under which the key will be set.

```go
type Condition string
```

<a name="Always"></a>

```go
const (
    // Always indicates that the key should always be set to the provided value.
    // This is the default.
    Always Condition = ""

    // NotExists indicates that the key should only be set if it does not exist.
    NotExists Condition = "NX"

    // NotExistOrEqual indicates that the key should only be set if it does not
    // exist or is equal to the set value. This is typically used to update the
    // expiry on the key.
    NotExistsOrEqual Condition = "NEX"
)
```

<a name="DelOption"></a>
## type [DelOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L17>)

DelOption represents a single option for the Del method.

```go
type DelOption interface {
    // contains filtered or unexported methods
}
```

<a name="DelOptions"></a>
## type [DelOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L20-L23>)

DelOptions are the resolved options for the Del method.

```go
type DelOptions struct {
    FencingToken hlc.HybridLogicalClock
    Timeout      time.Duration
}
```

<a name="DelOptions.Apply"></a>
### func \(\*DelOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L46>)

```go
func (o *DelOptions) Apply(opts []DelOption, rest ...DelOption)
```

Apply resolves the provided list of options.

<a name="GetOption"></a>
## type [GetOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L16>)

GetOption represents a single option for the Get method.

```go
type GetOption interface {
    // contains filtered or unexported methods
}
```

<a name="GetOptions"></a>
## type [GetOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L19-L21>)

GetOptions are the resolved options for the Get method.

```go
type GetOptions struct {
    Timeout time.Duration
}
```

<a name="GetOptions.Apply"></a>
### func \(\*GetOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L45>)

```go
func (o *GetOptions) Apply(opts []GetOption, rest ...GetOption)
```

Apply resolves the provided list of options.

<a name="PayloadError"></a>
## type [PayloadError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L42>)



```go
type PayloadError = errors.Payload
```

<a name="Response"></a>
## type [Response](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L36-L39>)

Response represents a state store response, which will include a value depending on the method and the stored version returned for the key \(if any\).

```go
type Response[T any] struct {
    Value   T
    Version hlc.HybridLogicalClock
}
```

<a name="ServiceError"></a>
## type [ServiceError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L41>)



```go
type ServiceError = errors.Service
```

<a name="SetOption"></a>
## type [SetOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L18>)

SetOption represents a single option for the Set method.

```go
type SetOption interface {
    // contains filtered or unexported methods
}
```

<a name="SetOptions"></a>
## type [SetOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L21-L26>)

SetOptions are the resolved options for the Set method.

```go
type SetOptions struct {
    Expiry       time.Duration
    Condition    Condition
    FencingToken hlc.HybridLogicalClock
    Timeout      time.Duration
}
```

<a name="SetOptions.Apply"></a>
### func \(\*SetOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L66>)

```go
func (o *SetOptions) Apply(opts []SetOption, rest ...SetOption)
```

Apply resolves the provided list of options.

<a name="VDelOption"></a>
## type [VDelOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L17>)

VDelOption represents a single option for the VDel method.

```go
type VDelOption interface {
    // contains filtered or unexported methods
}
```

<a name="VDelOptions"></a>
## type [VDelOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L20-L23>)

VDelOptions are the resolved options for the VDel method.

```go
type VDelOptions struct {
    FencingToken hlc.HybridLogicalClock
    Timeout      time.Duration
}
```

<a name="VDelOptions.Apply"></a>
### func \(\*VDelOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L48>)

```go
func (o *VDelOptions) Apply(opts []VDelOption, rest ...VDelOption)
```

Apply resolves the provided list of options.

<a name="WithCondition"></a>
## type [WithCondition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L18>)

WithCondition indicates that the key should only be set under the given conditions.

```go
type WithCondition Condition
```

<a name="WithExpiry"></a>
## type [WithExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L22>)

WithExpiry indicates that the key should expire after the given duration \(with millisecond precision\).

```go
type WithExpiry time.Duration
```

<a name="WithFencingToken"></a>
## type [WithFencingToken](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L26>)

WithFencingToken adds a fencing token to the set request to provide lock ownership checking.

```go
type WithFencingToken hlc.HybridLogicalClock
```

<a name="WithTimeout"></a>
## type [WithTimeout](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L29>)

WithTimeout adds a timeout to the request \(with second precision\).

```go
type WithTimeout time.Duration
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

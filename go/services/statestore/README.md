<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# statestore

```go
import "github.com/Azure/iot-operations-sdks/go/services/statestore"
```

## Index

- [Variables](<#variables>)
- [type ArgumentError](<#ArgumentError>)
- [type Client](<#Client>)
  - [func New\(client mqtt.Client\) \(\*Client, error\)](<#New>)
  - [func \(c \*Client\) Del\(ctx context.Context, key string\) \(bool, hlc.HybridLogicalClock, error\)](<#Client.Del>)
  - [func \(c \*Client\) Get\(ctx context.Context, key string\) \(\[\]byte, hlc.HybridLogicalClock, error\)](<#Client.Get>)
  - [func \(c \*Client\) Listen\(ctx context.Context\) \(func\(\), error\)](<#Client.Listen>)
  - [func \(c \*Client\) Set\(ctx context.Context, key string, val \[\]byte, opt ...SetOption\) \(bool, hlc.HybridLogicalClock, error\)](<#Client.Set>)
  - [func \(c \*Client\) Vdel\(ctx context.Context, key string, val \[\]byte\) \(bool, hlc.HybridLogicalClock, error\)](<#Client.Vdel>)
- [type Condition](<#Condition>)
- [type PayloadError](<#PayloadError>)
- [type ResponseError](<#ResponseError>)
- [type SetOption](<#SetOption>)
- [type SetOptions](<#SetOptions>)
  - [func \(o \*SetOptions\) Apply\(opts \[\]SetOption, rest ...SetOption\)](<#SetOptions.Apply>)
- [type WithCondition](<#WithCondition>)
- [type WithExpiry](<#WithExpiry>)


## Variables

<a name="ErrResponse"></a>

```go
var (
    ErrResponse = errors.ErrResponse
    ErrPayload  = errors.ErrPayload
    ErrArgument = errors.ErrArgument
)
```

<a name="ArgumentError"></a>
## type [ArgumentError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L22>)



```go
type ArgumentError = errors.Argument
```

<a name="Client"></a>
## type [Client](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L16-L18>)

Client represents a client of the state store.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L32>)

```go
func New(client mqtt.Client) (*Client, error)
```

New creates a new state store client.

<a name="Client.Del"></a>
### func \(\*Client\) [Del](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L110-L113>)

```go
func (c *Client) Del(ctx context.Context, key string) (bool, hlc.HybridLogicalClock, error)
```

Del deletes the value of the given key. If the key was present, it returns true and the stored timestamp of the key; otherwise, it returns false and a zero timestamp.

<a name="Client.Get"></a>
### func \(\*Client\) [Get](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L100-L103>)

```go
func (c *Client) Get(ctx context.Context, key string) ([]byte, hlc.HybridLogicalClock, error)
```

Get the value and timestamp of the given key. If the key is not present, it returns nil and a zero timestamp; if the key is present but empty, it returns an empty slice and the stored timestamp.

<a name="Client.Listen"></a>
### func \(\*Client\) [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L55>)

```go
func (c *Client) Listen(ctx context.Context) (func(), error)
```

Listen to the response topic\(s\). Returns a function to stop listening. Must be called before any state store methods. Note that cancelling this context will cause the unsubscribe call to fail.

<a name="Client.Set"></a>
### func \(\*Client\) [Set](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L62-L67>)

```go
func (c *Client) Set(ctx context.Context, key string, val []byte, opt ...SetOption) (bool, hlc.HybridLogicalClock, error)
```

Set the value of the given key. If the key is successfully set, it returns true and the new or updated timestamp; if the key is not set due to the specified condition, it returns false and the stored timestamp.

<a name="Client.Vdel"></a>
### func \(\*Client\) [Vdel](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L120-L124>)

```go
func (c *Client) Vdel(ctx context.Context, key string, val []byte) (bool, hlc.HybridLogicalClock, error)
```

Vdel deletes the value of the given key if it is equal to the given value. If the key was present and the value matched, it returns true and the stored timestamp of the key; otherwise, it returns false and a zero timestamp.

<a name="Condition"></a>
## type [Condition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L16>)

Condition specifies the conditions under which the key will be set.

```go
type Condition byte
```

<a name="Always"></a>

```go
const (
    // Always indicates that the key should always be set to the provided value.
    // This is the default.
    Always Condition = iota

    // NotExists indicates that the key should only be set if it does not exist.
    NotExists

    // NotExistOrEqual indicates that the key should only be set if it does not
    // exist or is equal to the set value. This is typically used to update the
    // expiry on the key.
    NotExistsOrEqual
)
```

<a name="PayloadError"></a>
## type [PayloadError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L21>)



```go
type PayloadError = errors.Payload
```

<a name="ResponseError"></a>
## type [ResponseError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L20>)



```go
type ResponseError = errors.Response
```

<a name="SetOption"></a>
## type [SetOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L7>)

SetOption represents a single option for the Set method.

```go
type SetOption interface {
    // contains filtered or unexported methods
}
```

<a name="SetOptions"></a>
## type [SetOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L10-L13>)

SetOptions are the resolved options for the Set method.

```go
type SetOptions struct {
    Condition Condition
    Expiry    time.Duration
}
```

<a name="SetOptions.Apply"></a>
### func \(\*SetOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L42-L45>)

```go
func (o *SetOptions) Apply(opts []SetOption, rest ...SetOption)
```

Apply resolves the provided list of options.

<a name="WithCondition"></a>
## type [WithCondition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L20>)

WithCondition indicates that the key should only be set under the given conditions.

```go
type WithCondition Condition
```

<a name="WithExpiry"></a>
## type [WithExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L24>)

WithExpiry indicates that the key should expire after the given duration \(with millisecond precision\).

```go
type WithExpiry time.Duration
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# statestore

```go
import "github.com/Azure/iot-operations-sdks/go/services/statestore"
```

## Index

- [type Client](<#Client>)
  - [func New\(client mqtt.Client, opt ...protocol.Option\) \(\*Client, error\)](<#New>)
  - [func \(c \*Client\) Del\(ctx context.Context, key string\) \(bool, error\)](<#Client.Del>)
  - [func \(c \*Client\) Get\(ctx context.Context, key string\) \(\[\]byte, error\)](<#Client.Get>)
  - [func \(c \*Client\) KeyNotify\(ctx context.Context, key string, notify bool\) \(bool, error\)](<#Client.KeyNotify>)
  - [func \(c \*Client\) Listen\(ctx context.Context\) \(func\(\), error\)](<#Client.Listen>)
  - [func \(c \*Client\) Notify\(\) \<\-chan Notify](<#Client.Notify>)
  - [func \(c \*Client\) Set\(ctx context.Context, key string, val \[\]byte, opt ...SetOption\) error](<#Client.Set>)
  - [func \(c \*Client\) Vdel\(ctx context.Context, key string, val \[\]byte\) \(bool, error\)](<#Client.Vdel>)
- [type Condition](<#Condition>)
- [type Error](<#Error>)
- [type Notify](<#Notify>)
- [type SetOption](<#SetOption>)
- [type SetOptions](<#SetOptions>)
  - [func \(o \*SetOptions\) Apply\(opts \[\]SetOption, rest ...SetOption\)](<#SetOptions.Apply>)
- [type WithCondition](<#WithCondition>)
- [type WithExpiry](<#WithExpiry>)


<a name="Client"></a>
## type [Client](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L18-L23>)

Client represents a client of the state store.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L36>)

```go
func New(client mqtt.Client, opt ...protocol.Option) (*Client, error)
```

New creates a new state store client.

<a name="Client.Del"></a>
### func \(\*Client\) [Del](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L154>)

```go
func (c *Client) Del(ctx context.Context, key string) (bool, error)
```

Del deletes the value of the given key. If the key was not present, returns false with no error.

<a name="Client.Get"></a>
### func \(\*Client\) [Get](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L148>)

```go
func (c *Client) Get(ctx context.Context, key string) ([]byte, error)
```

Get the value of the given key.

<a name="Client.KeyNotify"></a>
### func \(\*Client\) [KeyNotify](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L171-L175>)

```go
func (c *Client) KeyNotify(ctx context.Context, key string, notify bool) (bool, error)
```

KeyNotify requests or stops notification for a key. If a stop is requested on a key that did not have notifications, it will return false with no error.

<a name="Client.Listen"></a>
### func \(\*Client\) [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L84>)

```go
func (c *Client) Listen(ctx context.Context) (func(), error)
```

Listen to the response topic\(s\). Returns a function to stop listening. Must be called before any state store methods. Note that cancelling this context will cause the unsubscribe call to fail.

<a name="Client.Notify"></a>
### func \(\*Client\) [Notify](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L195>)

```go
func (c *Client) Notify() <-chan Notify
```

Notify messages for registered keys will be sent to this channel.

<a name="Client.Set"></a>
### func \(\*Client\) [Set](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L105-L110>)

```go
func (c *Client) Set(ctx context.Context, key string, val []byte, opt ...SetOption) error
```

Set the value of the given key.

<a name="Client.Vdel"></a>
### func \(\*Client\) [Vdel](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L161-L165>)

```go
func (c *Client) Vdel(ctx context.Context, key string, val []byte) (bool, error)
```

Vdel deletes the value of the given key if it is equal to the given value. If the key was not present or the value did not match, returns false with no error.

<a name="Condition"></a>
## type [Condition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L16>)

Condition specifies the conditions under which the key will be set.

```go
type Condition byte
```

<a name="Always"></a>

```go
const (
    // Always indicates that the key should always be set to the provided value.
    // This is the default.
    Always Condition = iota

    // NotExists indicates that the key should only be set if it does not exist.
    NotExists

    // NotExistOrEqual indicates that the key should only be set if it does not
    // exist or is equal to the set value. This is typically used to update the
    // expiry on the key.
    NotExistsOrEqual
)
```

<a name="Error"></a>
## type [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L32>)

Error represents an error in a state store method.

```go
type Error = internal.Error
```

<a name="Notify"></a>
## type [Notify](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/statestore.go#L26-L29>)

Notify represents a notification event.

```go
type Notify struct {
    Operation, Key string
    Value          []byte
}
```

<a name="SetOption"></a>
## type [SetOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L7>)

SetOption represents a single option for the Set method.

```go
type SetOption interface {
    // contains filtered or unexported methods
}
```

<a name="SetOptions"></a>
## type [SetOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L10-L13>)

SetOptions are the resolved options for the Set method.

```go
type SetOptions struct {
    Condition Condition
    Expiry    time.Duration
}
```

<a name="SetOptions.Apply"></a>
### func \(\*SetOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L42-L45>)

```go
func (o *SetOptions) Apply(opts []SetOption, rest ...SetOption)
```

Apply resolves the provided list of options.

<a name="WithCondition"></a>
## type [WithCondition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L20>)

WithCondition indicates that the key should only be set under the given conditions.

```go
type WithCondition Condition
```

<a name="WithExpiry"></a>
## type [WithExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L24>)

WithExpiry indicates that the key should expire after the given duration \(with millisecond precision\).

```go
type WithExpiry time.Duration
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

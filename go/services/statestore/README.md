<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# statestore

```go
import "github.com/Azure/iot-operations-sdks/go/services/statestore"
```

## Index

- [Variables](<#variables>)
- [type ArgumentError](<#ArgumentError>)
- [type Client](<#Client>)
  - [func New\(client mqtt.Client, opt ...ClientOption\) \(\*Client, error\)](<#New>)
  - [func \(c \*Client\) Del\(ctx context.Context, key string, opt ...DelOption\) \(\*Response\[bool\], error\)](<#Client.Del>)
  - [func \(c \*Client\) Get\(ctx context.Context, key string, opt ...GetOption\) \(\*Response\[\[\]byte\], error\)](<#Client.Get>)
  - [func \(c \*Client\) KeyNotify\(ctx context.Context, key string, opt ...KeyNotifyOption\) \(\*Response\[bool\], error\)](<#Client.KeyNotify>)
  - [func \(c \*Client\) Listen\(ctx context.Context\) \(func\(\), error\)](<#Client.Listen>)
  - [func \(c \*Client\) Notify\(\) \<\-chan Notify](<#Client.Notify>)
  - [func \(c \*Client\) Set\(ctx context.Context, key string, val \[\]byte, opt ...SetOption\) \(\*Response\[bool\], error\)](<#Client.Set>)
  - [func \(c \*Client\) Vdel\(ctx context.Context, key string, val \[\]byte, opt ...VdelOption\) \(\*Response\[bool\], error\)](<#Client.Vdel>)
- [type ClientOption](<#ClientOption>)
  - [func WithLogger\(logger \*slog.Logger\) ClientOption](<#WithLogger>)
- [type ClientOptions](<#ClientOptions>)
  - [func \(o \*ClientOptions\) Apply\(opts \[\]ClientOption, rest ...ClientOption\)](<#ClientOptions.Apply>)
- [type Condition](<#Condition>)
- [type DelOption](<#DelOption>)
- [type DelOptions](<#DelOptions>)
  - [func \(o \*DelOptions\) Apply\(opts \[\]DelOption, rest ...DelOption\)](<#DelOptions.Apply>)
- [type GetOption](<#GetOption>)
- [type GetOptions](<#GetOptions>)
  - [func \(o \*GetOptions\) Apply\(opts \[\]GetOption, rest ...GetOption\)](<#GetOptions.Apply>)
- [type KeyNotifyOption](<#KeyNotifyOption>)
- [type KeyNotifyOptions](<#KeyNotifyOptions>)
  - [func \(o \*KeyNotifyOptions\) Apply\(opts \[\]KeyNotifyOption, rest ...KeyNotifyOption\)](<#KeyNotifyOptions.Apply>)
- [type Notify](<#Notify>)
- [type PayloadError](<#PayloadError>)
- [type Response](<#Response>)
- [type ResponseError](<#ResponseError>)
- [type SetOption](<#SetOption>)
- [type SetOptions](<#SetOptions>)
  - [func \(o \*SetOptions\) Apply\(opts \[\]SetOption, rest ...SetOption\)](<#SetOptions.Apply>)
- [type VdelOption](<#VdelOption>)
- [type VdelOptions](<#VdelOptions>)
  - [func \(o \*VdelOptions\) Apply\(opts \[\]VdelOption, rest ...VdelOption\)](<#VdelOptions.Apply>)
- [type WithConcurrency](<#WithConcurrency>)
- [type WithCondition](<#WithCondition>)
- [type WithExpiry](<#WithExpiry>)
- [type WithFencingToken](<#WithFencingToken>)
- [type WithStop](<#WithStop>)
- [type WithTimeout](<#WithTimeout>)


## Variables

<a name="ErrResponse"></a>

```go
var (
    ErrResponse = errors.ErrResponse
    ErrPayload  = errors.ErrPayload
    ErrArgument = errors.ErrArgument
)
```

<a name="ArgumentError"></a>
## type [ArgumentError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L45>)



```go
type ArgumentError = errors.Argument
```

<a name="Client"></a>
## type [Client](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L19-L24>)

Client represents a client of the state store.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L61>)

```go
func New(client mqtt.Client, opt ...ClientOption) (*Client, error)
```

New creates a new state store client.

<a name="Client.Del"></a>
### func \(\*Client\) [Del](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L25-L29>)

```go
func (c *Client) Del(ctx context.Context, key string, opt ...DelOption) (*Response[bool], error)
```

Del deletes the value of the given key. If the key was present, it returns true and the stored version of the key; otherwise, it returns false and a zero version.

<a name="Client.Get"></a>
### func \(\*Client\) [Get](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L24-L28>)

```go
func (c *Client) Get(ctx context.Context, key string, opt ...GetOption) (*Response[[]byte], error)
```

Get the value and version of the given key. If the key is not present, it returns nil and a zero version; if the key is present but empty, it returns an empty slice and the stored version.

<a name="Client.KeyNotify"></a>
### func \(\*Client\) [KeyNotify](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/keynotify.go#L26-L30>)

```go
func (c *Client) KeyNotify(ctx context.Context, key string, opt ...KeyNotifyOption) (*Response[bool], error)
```

KeyNotify requests or stops notification for a key. If a stop is requested on a key that did not have notifications, it will return false with no error.

<a name="Client.Listen"></a>
### func \(\*Client\) [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L106>)

```go
func (c *Client) Listen(ctx context.Context) (func(), error)
```

Listen to the response topic\(s\). Returns a function to stop listening. Must be called before any state store methods. Note that cancelling this context will cause the unsubscribe call to fail.

<a name="Client.Notify"></a>
### func \(\*Client\) [Notify](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/notify.go#L18>)

```go
func (c *Client) Notify() <-chan Notify
```

Notify messages for registered keys will be sent to this channel.

<a name="Client.Set"></a>
### func \(\*Client\) [Set](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L28-L33>)

```go
func (c *Client) Set(ctx context.Context, key string, val []byte, opt ...SetOption) (*Response[bool], error)
```

Set the value of the given key. If the key is successfully set, it returns true and the new or updated version; if the key is not set due to the specified condition, it returns false and the stored version.

<a name="Client.Vdel"></a>
### func \(\*Client\) [Vdel](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L25-L30>)

```go
func (c *Client) Vdel(ctx context.Context, key string, val []byte, opt ...VdelOption) (*Response[bool], error)
```

Vdel deletes the value of the given key if it is equal to the given value. If the key was present and the value matched, it returns true and the stored version of the key; otherwise, it returns false and a zero version.

<a name="ClientOption"></a>
## type [ClientOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L27>)

ClientOption represents a single option for the client.

```go
type ClientOption interface {
    // contains filtered or unexported methods
}
```

<a name="WithLogger"></a>
### func [WithLogger](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L220>)

```go
func WithLogger(logger *slog.Logger) ClientOption
```

WithLogger enables logging with the provided slog logger.

<a name="ClientOptions"></a>
## type [ClientOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L30-L33>)

ClientOptions are the resolved options for the client.

```go
type ClientOptions struct {
    Logger      *slog.Logger
    Concurrency uint
}
```

<a name="ClientOptions.Apply"></a>
### func \(\*ClientOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L193-L196>)

```go
func (o *ClientOptions) Apply(opts []ClientOption, rest ...ClientOption)
```

Apply resolves the provided list of options.

<a name="Condition"></a>
## type [Condition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L12>)

Condition specifies the conditions under which the key will be set.

```go
type Condition string
```

<a name="Always"></a>

```go
const (
    // Always indicates that the key should always be set to the provided value.
    // This is the default.
    Always Condition = ""

    // NotExists indicates that the key should only be set if it does not exist.
    NotExists Condition = "NX"

    // NotExistOrEqual indicates that the key should only be set if it does not
    // exist or is equal to the set value. This is typically used to update the
    // expiry on the key.
    NotExistsOrEqual Condition = "NEX"
)
```

<a name="DelOption"></a>
## type [DelOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L13>)

DelOption represents a single option for the Del method.

```go
type DelOption interface {
    // contains filtered or unexported methods
}
```

<a name="DelOptions"></a>
## type [DelOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L16-L19>)

DelOptions are the resolved options for the Del method.

```go
type DelOptions struct {
    FencingToken hlc.HybridLogicalClock
    Timeout      time.Duration
}
```

<a name="DelOptions.Apply"></a>
### func \(\*DelOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/del.go#L36-L39>)

```go
func (o *DelOptions) Apply(opts []DelOption, rest ...DelOption)
```

Apply resolves the provided list of options.

<a name="GetOption"></a>
## type [GetOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L13>)

GetOption represents a single option for the Get method.

```go
type GetOption interface {
    // contains filtered or unexported methods
}
```

<a name="GetOptions"></a>
## type [GetOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L16-L18>)

GetOptions are the resolved options for the Get method.

```go
type GetOptions struct {
    Timeout time.Duration
}
```

<a name="GetOptions.Apply"></a>
### func \(\*GetOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/get.go#L35-L38>)

```go
func (o *GetOptions) Apply(opts []GetOption, rest ...GetOption)
```

Apply resolves the provided list of options.

<a name="KeyNotifyOption"></a>
## type [KeyNotifyOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/keynotify.go#L12>)

KeyNotifyOption represents a single option for the KeyNotify method.

```go
type KeyNotifyOption interface {
    // contains filtered or unexported methods
}
```

<a name="KeyNotifyOptions"></a>
## type [KeyNotifyOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/keynotify.go#L15-L18>)

KeyNotifyOptions are the resolved options for the KeyNotify method.

```go
type KeyNotifyOptions struct {
    Stop    bool
    Timeout time.Duration
}
```

<a name="KeyNotifyOptions.Apply"></a>
### func \(\*KeyNotifyOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/keynotify.go#L42-L45>)

```go
func (o *KeyNotifyOptions) Apply(opts []KeyNotifyOption, rest ...KeyNotifyOption)
```

Apply resolves the provided list of options.

<a name="Notify"></a>
## type [Notify](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/notify.go#L12-L15>)

Notify represents a notification event.

```go
type Notify struct {
    Operation, Key string
    Value          []byte
}
```

<a name="PayloadError"></a>
## type [PayloadError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L44>)



```go
type PayloadError = errors.Payload
```

<a name="Response"></a>
## type [Response](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L38-L41>)

Response represents a state store response, which will include a value depending on the method and the stored version returned for the key \(if any\).

```go
type Response[T any] struct {
    Value   T
    Version hlc.HybridLogicalClock
}
```

<a name="ResponseError"></a>
## type [ResponseError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L43>)



```go
type ResponseError = errors.Response
```

<a name="SetOption"></a>
## type [SetOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L14>)

SetOption represents a single option for the Set method.

```go
type SetOption interface {
    // contains filtered or unexported methods
}
```

<a name="SetOptions"></a>
## type [SetOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L17-L22>)

SetOptions are the resolved options for the Set method.

```go
type SetOptions struct {
    Expiry       time.Duration
    Condition    Condition
    FencingToken hlc.HybridLogicalClock
    Timeout      time.Duration
}
```

<a name="SetOptions.Apply"></a>
### func \(\*SetOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/set.go#L55-L58>)

```go
func (o *SetOptions) Apply(opts []SetOption, rest ...SetOption)
```

Apply resolves the provided list of options.

<a name="VdelOption"></a>
## type [VdelOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L13>)

VdelOption represents a single option for the Vdel method.

```go
type VdelOption interface {
    // contains filtered or unexported methods
}
```

<a name="VdelOptions"></a>
## type [VdelOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L16-L19>)

VdelOptions are the resolved options for the Vdel method.

```go
type VdelOptions struct {
    FencingToken hlc.HybridLogicalClock
    Timeout      time.Duration
}
```

<a name="VdelOptions.Apply"></a>
### func \(\*VdelOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/vdel.go#L37-L40>)

```go
func (o *VdelOptions) Apply(opts []VdelOption, rest ...VdelOption)
```

Apply resolves the provided list of options.

<a name="WithConcurrency"></a>
## type [WithConcurrency](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/client.go#L51>)

WithConcurrency indicates how many notifications can execute in parallel.

```go
type WithConcurrency uint
```

<a name="WithCondition"></a>
## type [WithCondition](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L16>)

WithCondition indicates that the key should only be set under the given conditions.

```go
type WithCondition Condition
```

<a name="WithExpiry"></a>
## type [WithExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L20>)

WithExpiry indicates that the key should expire after the given duration \(with millisecond precision\).

```go
type WithExpiry time.Duration
```

<a name="WithFencingToken"></a>
## type [WithFencingToken](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L24>)

WithFencingToken adds a fencing token to the set request to provide lock ownership checking.

```go
type WithFencingToken hlc.HybridLogicalClock
```

<a name="WithStop"></a>
## type [WithStop](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/keynotify.go#L21>)

WithStop indicates that the notification should be stopped.

```go
type WithStop bool
```

<a name="WithTimeout"></a>
## type [WithTimeout](<https://github.com/Azure/iot-operations-sdks/blob/main/go/services/statestore/options.go#L27>)

WithTimeout adds a timeout to the request \(with second precision\).

```go
type WithTimeout time.Duration
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

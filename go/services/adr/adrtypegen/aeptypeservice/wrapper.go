// Code generated by Azure.Iot.Operations.ProtocolCompiler v0.10.0.0; DO NOT EDIT.
package aeptypeservice

import (
	"github.com/Azure/iot-operations-sdks/go/protocol"
)

type AepTypeServiceClient struct {
	protocol.Listeners
	*CreateDiscoveredAssetEndpointProfileCommandInvoker
}

const (
	CommandTopic = "akri/connector/resources/{ex:connectorClientId}/{ex:aepType}/{commandName}"
)

func NewAepTypeServiceClient(
	app *protocol.Application,
	client protocol.MqttClient,
	opts ...protocol.Option,
) (*AepTypeServiceClient, error) {
	var err error

	clientOpts := []protocol.Option{
		protocol.WithTopicTokenNamespace("ex:"),
		protocol.WithTopicTokens{
			"invokerClientId": client.ID(),
		},
	}

	var invokerOpts protocol.CommandInvokerOptions
	invokerOpts.ApplyOptions(opts, clientOpts...)

	aepTypeServiceClient := &AepTypeServiceClient{}

	aepTypeServiceClient.CreateDiscoveredAssetEndpointProfileCommandInvoker, err = NewCreateDiscoveredAssetEndpointProfileCommandInvoker(
		app,
		client,
		CommandTopic,
		&invokerOpts,
	)
	if err != nil {
		aepTypeServiceClient.Close()
		return nil, err
	}
	aepTypeServiceClient.Listeners = append(aepTypeServiceClient.Listeners, aepTypeServiceClient.CreateDiscoveredAssetEndpointProfileCommandInvoker)

	return aepTypeServiceClient, nil
}

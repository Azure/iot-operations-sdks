<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# mqtt

```go
import "github.com/Azure/iot-operations-sdks/go/protocol/mqtt"
```

## Index

- [type Client](<#Client>)
- [type Message](<#Message>)
- [type MessageHandler](<#MessageHandler>)
- [type PayloadFormat](<#PayloadFormat>)
- [type PublishOption](<#PublishOption>)
- [type PublishOptions](<#PublishOptions>)
  - [func \(o \*PublishOptions\) Apply\(opts \[\]PublishOption, rest ...PublishOption\)](<#PublishOptions.Apply>)
- [type QoS](<#QoS>)
- [type RetainHandling](<#RetainHandling>)
- [type SubscribeOption](<#SubscribeOption>)
- [type SubscribeOptions](<#SubscribeOptions>)
  - [func \(o \*SubscribeOptions\) Apply\(opts \[\]SubscribeOption, rest ...SubscribeOption\)](<#SubscribeOptions.Apply>)
- [type Subscription](<#Subscription>)
- [type UnsubscribeOption](<#UnsubscribeOption>)
- [type UnsubscribeOptions](<#UnsubscribeOptions>)
  - [func \(o \*UnsubscribeOptions\) Apply\(opts \[\]UnsubscribeOption, rest ...UnsubscribeOption\)](<#UnsubscribeOptions.Apply>)
- [type WithContentType](<#WithContentType>)
- [type WithCorrelationData](<#WithCorrelationData>)
- [type WithMessageExpiry](<#WithMessageExpiry>)
- [type WithNoLocal](<#WithNoLocal>)
- [type WithPayloadFormat](<#WithPayloadFormat>)
- [type WithQoS](<#WithQoS>)
- [type WithResponseTopic](<#WithResponseTopic>)
- [type WithRetain](<#WithRetain>)
- [type WithRetainHandling](<#WithRetainHandling>)
- [type WithUserProperties](<#WithUserProperties>)


<a name="Client"></a>
## type [Client](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L8-L28>)

Client represents the underlying MQTT client utilized by the protocol library.

```go
type Client interface {
    // Register a topic subscription with a message handler on the client.
    // Update must be called on the returned subscription to actually send
    // the subscription to the MQTT broker.
    Register(
        topic string,
        handler MessageHandler,
    ) (Subscription, error)

    // Publish sends a publish request to the MQTT broker.
    Publish(
        ctx context.Context,
        topic string,
        payload []byte,
        opts ...PublishOption,
    ) error

    // ClientID returns the identifier used by this client. If one is not
    // provided, a random ID must be generated for reconnection purposes.
    ClientID() string
}
```

<a name="Message"></a>
## type [Message](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L32-L37>)

Message represents a received message. The client implementation must support manual ack, since acks are managed by the protocol.

```go
type Message struct {
    Topic   string
    Payload []byte
    PublishOptions
    Ack func() error
}
```

<a name="MessageHandler"></a>
## type [MessageHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L41>)

MessageHandler is a user\-defined callback function used to handle messages received on the subscribed topic.

```go
type MessageHandler func(context.Context, *Message) error
```

<a name="PayloadFormat"></a>
## type [PayloadFormat](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/constants.go#L6>)



```go
type PayloadFormat byte
```

<a name="PayloadFormat0"></a>Payload Format indicators.

```go
const (
    // PayloadFormat0 indicates that the payload is unspecified bytes.
    PayloadFormat0 PayloadFormat = iota

    // PayloadFormat1 indicates that the payload is UTF-8 encoded character
    // data.
    PayloadFormat1
)
```

<a name="PublishOption"></a>
## type [PublishOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L85>)

PublishOption represents a single publish option.

```go
type PublishOption interface {
    // contains filtered or unexported methods
}
```

<a name="PublishOptions"></a>
## type [PublishOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L73-L82>)

PublishOptions are the resolved publish options.

```go
type PublishOptions struct {
    ContentType     string
    CorrelationData []byte
    MessageExpiry   uint32
    PayloadFormat   PayloadFormat
    QoS             QoS
    ResponseTopic   string
    Retain          bool
    UserProperties  map[string]string
}
```

<a name="PublishOptions.Apply"></a>
### func \(\*PublishOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L152-L155>)

```go
func (o *PublishOptions) Apply(opts []PublishOption, rest ...PublishOption)
```

Apply resolves the provided list of options.

<a name="QoS"></a>
## type [QoS](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/constants.go#L4>)



```go
type QoS byte
```

<a name="QoS0"></a>Quality of Service levels.

```go
const (
    // QoS0 indicates at most once delivery, a.k.a. "fire and forget".
    QoS0 QoS = iota

    // QoS1 indicates at least once delivery, which ensures the message is
    // delivered at least one time to the receiver.
    QoS1

    // QoS2 indicates exactly once delivery, which ensures the message is
    // received only once by the recipient.
    QoS2
)
```

<a name="RetainHandling"></a>
## type [RetainHandling](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/constants.go#L5>)



```go
type RetainHandling byte
```

<a name="RetainHandling0"></a>Retain Handling options.

```go
const (
    // RetainHandling0 indicates that the Server MUST send the retained messages
    // matching the Topic Filter of the subscription to the Client.
    RetainHandling0 RetainHandling = iota

    // RetainHandling1 indicates that if the subscription did not already exist,
    // the Server MUST send all retained messages matching the Topic Filter of
    // the subscription to the Client, and if the subscription did exist the
    // Server MUST NOT send the retained messages.
    RetainHandling1

    // RetainHandling2 indicates that the Server MUST NOT send the retained
    // messages.
    RetainHandling2
)
```

<a name="SubscribeOption"></a>
## type [SubscribeOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L62>)

SubscribeOption represents a single subscribe option.

```go
type SubscribeOption interface {
    // contains filtered or unexported methods
}
```

<a name="SubscribeOptions"></a>
## type [SubscribeOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L53-L59>)

SubscribeOptions are the resolved subscribe options.

```go
type SubscribeOptions struct {
    NoLocal        bool
    QoS            QoS
    Retain         bool
    RetainHandling RetainHandling
    UserProperties map[string]string
}
```

<a name="SubscribeOptions.Apply"></a>
### func \(\*SubscribeOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L104-L107>)

```go
func (o *SubscribeOptions) Apply(opts []SubscribeOption, rest ...SubscribeOption)
```

Apply resolves the provided list of options.

<a name="Subscription"></a>
## type [Subscription](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L44-L50>)

Subscription represents an open subscription.

```go
type Subscription interface {
    // Unsubscribe this subscription.
    Unsubscribe(context.Context, ...UnsubscribeOption) error

    // Update or initialize the actual underlying MQTT subscription.
    Update(context.Context, ...SubscribeOption) error
}
```

<a name="UnsubscribeOption"></a>
## type [UnsubscribeOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L70>)

UnsubscribeOption represents a single unsubscribe option.

```go
type UnsubscribeOption interface {
    // contains filtered or unexported methods
}
```

<a name="UnsubscribeOptions"></a>
## type [UnsubscribeOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/types.go#L65-L67>)

UnsubscribeOptions are the resolve unsubscribe options.

```go
type UnsubscribeOptions struct {
    UserProperties map[string]string
}
```

<a name="UnsubscribeOptions.Apply"></a>
### func \(\*UnsubscribeOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L128-L131>)

```go
func (o *UnsubscribeOptions) Apply(opts []UnsubscribeOption, rest ...UnsubscribeOption)
```

Apply resolves the provided list of options.

<a name="WithContentType"></a>
## type [WithContentType](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L5>)

WithContentType sets the content type for the publish.

```go
type WithContentType string
```

<a name="WithCorrelationData"></a>
## type [WithCorrelationData](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L8>)

WithCorrelationData sets the correlation data for the publish.

```go
type WithCorrelationData []byte
```

<a name="WithMessageExpiry"></a>
## type [WithMessageExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L11>)

WithMessageExpiry sets the message expiry interval for the publish.

```go
type WithMessageExpiry uint32
```

<a name="WithNoLocal"></a>
## type [WithNoLocal](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L14>)

WithNoLocal sets the no local flag for the subscription.

```go
type WithNoLocal bool
```

<a name="WithPayloadFormat"></a>
## type [WithPayloadFormat](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L17>)

WithPayloadFormat sets the payload format indicator for the publish.

```go
type WithPayloadFormat PayloadFormat
```

<a name="WithQoS"></a>
## type [WithQoS](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L20>)

WithQoS sets the QoS level for the publish or subscribe.

```go
type WithQoS QoS
```

<a name="WithResponseTopic"></a>
## type [WithResponseTopic](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L23>)

WithResponseTopic sets the response topic for the publish.

```go
type WithResponseTopic string
```

<a name="WithRetain"></a>
## type [WithRetain](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L27>)

WithRetain sets the retain flag for the publish or the retain\-as\-publish flag for the subscribe.

```go
type WithRetain bool
```

<a name="WithRetainHandling"></a>
## type [WithRetainHandling](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L31>)

WithRetainHandling specifies the handling of retained messages on this subscribe.

```go
type WithRetainHandling RetainHandling
```

<a name="WithUserProperties"></a>
## type [WithUserProperties](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/mqtt/options.go#L34>)

WithUserProperties sets the user properties for the publish or subscribe.

```go
type WithUserProperties map[string]string
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

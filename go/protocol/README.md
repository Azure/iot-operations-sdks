<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# protocol

```go
import "github.com/Azure/iot-operations-sdks/go/protocol"
```

## Index

- [Constants](<#constants>)
- [func Listen\(ctx context.Context, listeners ...Listener\) \(func\(\), error\)](<#Listen>)
- [func WithLogger\(logger \*slog.Logger\) interface \{
    Option
    CommandExecutorOption
    CommandInvokerOption
    TelemetryReceiverOption
    TelemetrySenderOption
\}](<#WithLogger>)
- [type CommandExecutor](<#CommandExecutor>)
  - [func NewCommandExecutor\[Req, Res any\]\(client mqtt.Client, requestEncoding Encoding\[Req\], responseEncoding Encoding\[Res\], requestTopic string, handler CommandHandler\[Req, Res\], opt ...CommandExecutorOption\) \(ce \*CommandExecutor\[Req, Res\], err error\)](<#NewCommandExecutor>)
  - [func \(ce \*CommandExecutor\[Req, Res\]\) Listen\(ctx context.Context\) \(func\(\), error\)](<#CommandExecutor[Req, Res].Listen>)
- [type CommandExecutorOption](<#CommandExecutorOption>)
- [type CommandExecutorOptions](<#CommandExecutorOptions>)
  - [func \(o \*CommandExecutorOptions\) Apply\(opts \[\]CommandExecutorOption, rest ...CommandExecutorOption\)](<#CommandExecutorOptions.Apply>)
  - [func \(o \*CommandExecutorOptions\) ApplyOptions\(opts \[\]Option, rest ...Option\)](<#CommandExecutorOptions.ApplyOptions>)
- [type CommandHandler](<#CommandHandler>)
- [type CommandInvoker](<#CommandInvoker>)
  - [func NewCommandInvoker\[Req, Res any\]\(client mqtt.Client, requestEncoding Encoding\[Req\], responseEncoding Encoding\[Res\], requestTopic string, opt ...CommandInvokerOption\) \(ci \*CommandInvoker\[Req, Res\], err error\)](<#NewCommandInvoker>)
  - [func \(ci \*CommandInvoker\[Req, Res\]\) Invoke\(ctx context.Context, req Req, opt ...InvokeOption\) \(res \*CommandResponse\[Res\], err error\)](<#CommandInvoker[Req, Res].Invoke>)
  - [func \(ci \*CommandInvoker\[Req, Res\]\) Listen\(ctx context.Context\) \(func\(\), error\)](<#CommandInvoker[Req, Res].Listen>)
- [type CommandInvokerOption](<#CommandInvokerOption>)
- [type CommandInvokerOptions](<#CommandInvokerOptions>)
  - [func \(o \*CommandInvokerOptions\) Apply\(opts \[\]CommandInvokerOption, rest ...CommandInvokerOption\)](<#CommandInvokerOptions.Apply>)
  - [func \(o \*CommandInvokerOptions\) ApplyOptions\(opts \[\]Option, rest ...Option\)](<#CommandInvokerOptions.ApplyOptions>)
- [type CommandRequest](<#CommandRequest>)
- [type CommandResponse](<#CommandResponse>)
  - [func Respond\[Res any\]\(payload Res, opt ...RespondOption\) \(\*CommandResponse\[Res\], error\)](<#Respond>)
- [type Empty](<#Empty>)
  - [func \(Empty\) ContentType\(\) string](<#Empty.ContentType>)
  - [func \(Empty\) Deserialize\(data \[\]byte\) \(any, error\)](<#Empty.Deserialize>)
  - [func \(Empty\) IsUTF8\(\) bool](<#Empty.IsUTF8>)
  - [func \(Empty\) Serialize\(t any\) \(\[\]byte, error\)](<#Empty.Serialize>)
- [type Encoding](<#Encoding>)
- [type InvocationError](<#InvocationError>)
  - [func \(e InvocationError\) Error\(\) string](<#InvocationError.Error>)
- [type InvokeOption](<#InvokeOption>)
- [type InvokeOptions](<#InvokeOptions>)
  - [func \(o \*InvokeOptions\) Apply\(opts \[\]InvokeOption, rest ...InvokeOption\)](<#InvokeOptions.Apply>)
- [type JSON](<#JSON>)
  - [func \(JSON\[T\]\) ContentType\(\) string](<#JSON[T].ContentType>)
  - [func \(JSON\[T\]\) Deserialize\(data \[\]byte\) \(T, error\)](<#JSON[T].Deserialize>)
  - [func \(JSON\[T\]\) IsUTF8\(\) bool](<#JSON[T].IsUTF8>)
  - [func \(JSON\[T\]\) Serialize\(t T\) \(\[\]byte, error\)](<#JSON[T].Serialize>)
- [type Listener](<#Listener>)
- [type Message](<#Message>)
- [type Option](<#Option>)
- [type Raw](<#Raw>)
  - [func \(Raw\) ContentType\(\) string](<#Raw.ContentType>)
  - [func \(Raw\) Deserialize\(data \[\]byte\) \(\[\]byte, error\)](<#Raw.Deserialize>)
  - [func \(Raw\) IsUTF8\(\) bool](<#Raw.IsUTF8>)
  - [func \(Raw\) Serialize\(t \[\]byte\) \(\[\]byte, error\)](<#Raw.Serialize>)
- [type RespondOption](<#RespondOption>)
- [type RespondOptions](<#RespondOptions>)
  - [func \(o \*RespondOptions\) Apply\(opts \[\]RespondOption, rest ...RespondOption\)](<#RespondOptions.Apply>)
- [type SendOption](<#SendOption>)
- [type SendOptions](<#SendOptions>)
  - [func \(o \*SendOptions\) Apply\(opts \[\]SendOption, rest ...SendOption\)](<#SendOptions.Apply>)
- [type TelemetryHandler](<#TelemetryHandler>)
- [type TelemetryMessage](<#TelemetryMessage>)
- [type TelemetryReceiver](<#TelemetryReceiver>)
  - [func NewTelemetryReceiver\[T any\]\(client mqtt.Client, encoding Encoding\[T\], topic string, handler TelemetryHandler\[T\], opt ...TelemetryReceiverOption\) \(tr \*TelemetryReceiver\[T\], err error\)](<#NewTelemetryReceiver>)
  - [func \(tr \*TelemetryReceiver\[T\]\) Listen\(ctx context.Context\) \(func\(\), error\)](<#TelemetryReceiver[T].Listen>)
- [type TelemetryReceiverOption](<#TelemetryReceiverOption>)
- [type TelemetryReceiverOptions](<#TelemetryReceiverOptions>)
  - [func \(o \*TelemetryReceiverOptions\) Apply\(opts \[\]TelemetryReceiverOption, rest ...TelemetryReceiverOption\)](<#TelemetryReceiverOptions.Apply>)
  - [func \(o \*TelemetryReceiverOptions\) ApplyOptions\(opts \[\]Option, rest ...Option\)](<#TelemetryReceiverOptions.ApplyOptions>)
- [type TelemetrySender](<#TelemetrySender>)
  - [func NewTelemetrySender\[T any\]\(client mqtt.Client, encoding Encoding\[T\], topic string, opt ...TelemetrySenderOption\) \(ts \*TelemetrySender\[T\], err error\)](<#NewTelemetrySender>)
  - [func \(ts \*TelemetrySender\[T\]\) Send\(ctx context.Context, val T, opt ...SendOption\) \(err error\)](<#TelemetrySender[T].Send>)
- [type TelemetrySenderOption](<#TelemetrySenderOption>)
- [type TelemetrySenderOptions](<#TelemetrySenderOptions>)
  - [func \(o \*TelemetrySenderOptions\) Apply\(opts \[\]TelemetrySenderOption, rest ...TelemetrySenderOption\)](<#TelemetrySenderOptions.Apply>)
  - [func \(o \*TelemetrySenderOptions\) ApplyOptions\(opts \[\]Option, rest ...Option\)](<#TelemetrySenderOptions.ApplyOptions>)
- [type WithCacheTTL](<#WithCacheTTL>)
- [type WithConcurrency](<#WithConcurrency>)
- [type WithExecutionTimeout](<#WithExecutionTimeout>)
- [type WithFencingToken](<#WithFencingToken>)
- [type WithIdempotent](<#WithIdempotent>)
- [type WithManualAck](<#WithManualAck>)
- [type WithMessageExpiry](<#WithMessageExpiry>)
- [type WithMetadata](<#WithMetadata>)
- [type WithResponseTopic](<#WithResponseTopic>)
- [type WithResponseTopicPrefix](<#WithResponseTopicPrefix>)
- [type WithResponseTopicSuffix](<#WithResponseTopicSuffix>)
- [type WithRetain](<#WithRetain>)
- [type WithShareName](<#WithShareName>)
- [type WithTopicNamespace](<#WithTopicNamespace>)
- [type WithTopicTokenNamespace](<#WithTopicTokenNamespace>)
- [type WithTopicTokens](<#WithTopicTokens>)


## Constants

<a name="DefaultMessageExpiry"></a>DefaultMessageExpiry is the MessageExpiry applied to Invoke or Send if none is specified \(10 seconds\).

```go
const DefaultMessageExpiry = 10
```

<a name="Listen"></a>
## func [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/listener.go#L202>)

```go
func Listen(ctx context.Context, listeners ...Listener) (func(), error)
```

Listen starts all of the provided listeners.

<a name="WithLogger"></a>
## func [WithLogger](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L194-L200>)

```go
func WithLogger(logger *slog.Logger) interface {
    Option
    CommandExecutorOption
    CommandInvokerOption
    TelemetryReceiverOption
    TelemetrySenderOption
}
```

WithLogger enables logging with the provided slog logger.

<a name="CommandExecutor"></a>
## type [CommandExecutor](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L22-L30>)

CommandExecutor provides the ability to execute a single command.

```go
type CommandExecutor[Req any, Res any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewCommandExecutor"></a>
### func [NewCommandExecutor](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L90-L97>)

```go
func NewCommandExecutor[Req, Res any](client mqtt.Client, requestEncoding Encoding[Req], responseEncoding Encoding[Res], requestTopic string, handler CommandHandler[Req, Res], opt ...CommandExecutorOption) (ce *CommandExecutor[Req, Res], err error)
```

NewCommandExecutor creates a new command executor.

<a name="CommandExecutor[Req, Res].Listen"></a>
### func \(\*CommandExecutor\[Req, Res\]\) [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L191-L193>)

```go
func (ce *CommandExecutor[Req, Res]) Listen(ctx context.Context) (func(), error)
```

Listen to the MQTT request topic. Returns a function to stop listening. Note that cancelling this context will cause the unsubscribe call to fail.

<a name="CommandExecutorOption"></a>
## type [CommandExecutorOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L33>)

CommandExecutorOption represents a single command executor option.

```go
type CommandExecutorOption interface {
    // contains filtered or unexported methods
}
```

<a name="CommandExecutorOptions"></a>
## type [CommandExecutorOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L36-L47>)

CommandExecutorOptions are the resolved command executor options.

```go
type CommandExecutorOptions struct {
    Idempotent bool
    CacheTTL   time.Duration

    Concurrency      uint
    ExecutionTimeout time.Duration
    ShareName        string

    TopicNamespace string
    TopicTokens    map[string]string
    Logger         *slog.Logger
}
```

<a name="CommandExecutorOptions.Apply"></a>
### func \(\*CommandExecutorOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L431-L434>)

```go
func (o *CommandExecutorOptions) Apply(opts []CommandExecutorOption, rest ...CommandExecutorOption)
```

Apply resolves the provided list of options.

<a name="CommandExecutorOptions.ApplyOptions"></a>
### func \(\*CommandExecutorOptions\) [ApplyOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L448>)

```go
func (o *CommandExecutorOptions) ApplyOptions(opts []Option, rest ...Option)
```

ApplyOptions filters and resolves the provided list of options.

<a name="CommandHandler"></a>
## type [CommandHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L52-L55>)

CommandHandler is the user\-provided implementation of a single command execution. It is treated as blocking; all parallelism is handled by the library. This \*must\* be thread\-safe.

```go
type CommandHandler[Req any, Res any] func(
    context.Context,
    *CommandRequest[Req],
) (*CommandResponse[Res], error)
```

<a name="CommandInvoker"></a>
## type [CommandInvoker](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L19-L26>)

CommandInvoker provides the ability to invoke a single command.

```go
type CommandInvoker[Req any, Res any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewCommandInvoker"></a>
### func [NewCommandInvoker](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L85-L91>)

```go
func NewCommandInvoker[Req, Res any](client mqtt.Client, requestEncoding Encoding[Req], responseEncoding Encoding[Res], requestTopic string, opt ...CommandInvokerOption) (ci *CommandInvoker[Req, Res], err error)
```

NewCommandInvoker creates a new command invoker.

<a name="CommandInvoker[Req, Res].Invoke"></a>
### func \(\*CommandInvoker\[Req, Res\]\) [Invoke](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L170-L174>)

```go
func (ci *CommandInvoker[Req, Res]) Invoke(ctx context.Context, req Req, opt ...InvokeOption) (res *CommandResponse[Res], err error)
```

Invoke calls the command. This call will block until the command returns; any desired parallelism between invocations should be handled by the caller using normal Go constructs.

<a name="CommandInvoker[Req, Res].Listen"></a>
### func \(\*CommandInvoker\[Req, Res\]\) [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L279-L281>)

```go
func (ci *CommandInvoker[Req, Res]) Listen(ctx context.Context) (func(), error)
```

Listen to the response topic\(s\). Returns a function to stop listening. Must be called before any calls to Invoke. Note that cancelling this context will cause the unsubscribe call to fail.

<a name="CommandInvokerOption"></a>
## type [CommandInvokerOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L29>)

CommandInvokerOption represents a single command invoker option.

```go
type CommandInvokerOption interface {
    // contains filtered or unexported methods
}
```

<a name="CommandInvokerOptions"></a>
## type [CommandInvokerOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L32-L40>)

CommandInvokerOptions are the resolved command invoker options.

```go
type CommandInvokerOptions struct {
    ResponseTopic       func(string) string
    ResponseTopicPrefix string
    ResponseTopicSuffix string

    TopicNamespace string
    TopicTokens    map[string]string
    Logger         *slog.Logger
}
```

<a name="CommandInvokerOptions.Apply"></a>
### func \(\*CommandInvokerOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L320-L323>)

```go
func (o *CommandInvokerOptions) Apply(opts []CommandInvokerOption, rest ...CommandInvokerOption)
```

Apply resolves the provided list of options.

<a name="CommandInvokerOptions.ApplyOptions"></a>
### func \(\*CommandInvokerOptions\) [ApplyOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L337>)

```go
func (o *CommandInvokerOptions) ApplyOptions(opts []Option, rest ...Option)
```

ApplyOptions filters and resolves the provided list of options.

<a name="CommandRequest"></a>
## type [CommandRequest](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L59-L63>)

CommandRequest contains per\-message data and methods that are exposed to the command handlers.

```go
type CommandRequest[Req any] struct {
    FencingToken hlc.HybridLogicalClock
    // contains filtered or unexported fields
}
```

<a name="CommandResponse"></a>
## type [CommandResponse](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L67-L69>)

CommandResponse contains per\-message data and methods that are returned by the command handlers.

```go
type CommandResponse[Res any] struct {
    // contains filtered or unexported fields
}
```

<a name="Respond"></a>
### func [Respond](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L414-L417>)

```go
func Respond[Res any](payload Res, opt ...RespondOption) (*CommandResponse[Res], error)
```

Respond is a shorthand to create a command response with required values and options set appropriately. Note that the response may be incomplete and will be filled out by the library after being returned.

<a name="Empty"></a>
## type [Empty](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L23>)

Empty represents an encoding that contains no value.

```go
type Empty struct{}
```

<a name="Empty.ContentType"></a>
### func \(Empty\) [ContentType](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L82>)

```go
func (Empty) ContentType() string
```

ContentType returns the empty MIME type.

<a name="Empty.Deserialize"></a>
### func \(Empty\) [Deserialize](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L103>)

```go
func (Empty) Deserialize(data []byte) (any, error)
```

Deserialize validates that the payload is empty.

<a name="Empty.IsUTF8"></a>
### func \(Empty\) [IsUTF8](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L87>)

```go
func (Empty) IsUTF8() bool
```

IsUTF8 indicates that empty is not \(meaningfully\) valid UTF8.

<a name="Empty.Serialize"></a>
### func \(Empty\) [Serialize](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L92>)

```go
func (Empty) Serialize(t any) ([]byte, error)
```

Serialize validates that the payload is empty.

<a name="Encoding"></a>
## type [Encoding](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L12-L17>)

Encoding is a translation between a concrete Go type T and byte data. All methods \*must\* be thread\-safe.

```go
type Encoding[T any] interface {
    ContentType() string
    IsUTF8() bool
    Serialize(T) ([]byte, error)
    Deserialize([]byte) (T, error)
}
```

<a name="InvocationError"></a>
## type [InvocationError](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/types.go#L27-L31>)

InvocationError represents an error intentionally returned by a handler to indicate incorrect invocation.

```go
type InvocationError struct {
    Message       string
    PropertyName  string
    PropertyValue any
}
```

<a name="InvocationError.Error"></a>
### func \(InvocationError\) [Error](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/types.go#L39>)

```go
func (e InvocationError) Error() string
```

Error returns the invocation error as a string.

<a name="InvokeOption"></a>
## type [InvokeOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L43>)

InvokeOption represent a single per\-invoke option.

```go
type InvokeOption interface {
    // contains filtered or unexported methods
}
```

<a name="InvokeOptions"></a>
## type [InvokeOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L46-L52>)

InvokeOptions are the resolved per\-invoke options.

```go
type InvokeOptions struct {
    FencingToken hlc.HybridLogicalClock

    MessageExpiry uint32
    TopicTokens   map[string]string
    Metadata      map[string]string
}
```

<a name="InvokeOptions.Apply"></a>
### func \(\*InvokeOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L377-L380>)

```go
func (o *InvokeOptions) Apply(opts []InvokeOption, rest ...InvokeOption)
```

Apply resolves the provided list of options.

<a name="JSON"></a>
## type [JSON](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L20>)

JSON is a simple implementation of a JSON encoding.

```go
type JSON[T any] struct{}
```

<a name="JSON[T].ContentType"></a>
### func \(JSON\[T\]\) [ContentType](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L60>)

```go
func (JSON[T]) ContentType() string
```

ContentType returns the JSON MIME type.

<a name="JSON[T].Deserialize"></a>
### func \(JSON\[T\]\) [Deserialize](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L75>)

```go
func (JSON[T]) Deserialize(data []byte) (T, error)
```

Deserialize translates JSON bytes into the Go type T.

<a name="JSON[T].IsUTF8"></a>
### func \(JSON\[T\]\) [IsUTF8](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L65>)

```go
func (JSON[T]) IsUTF8() bool
```

IsUTF8 indicates that JSON is valid UTF8.

<a name="JSON[T].Serialize"></a>
### func \(JSON\[T\]\) [Serialize](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L70>)

```go
func (JSON[T]) Serialize(t T) ([]byte, error)
```

Serialize translates the Go type T into JSON bytes.

<a name="Listener"></a>
## type [Listener](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/listener.go#L19-L21>)

Listener represents an object which will listen to a MQTT topic.

```go
type Listener interface {
    Listen(context.Context) (func(), error)
}
```

<a name="Message"></a>
## type [Message](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/types.go#L7-L23>)

Message contains common message data that is exposed to message handlers.

```go
type Message[T any] struct {
    // The message payload.
    Payload T

    // The ID of the calling MQTT client.
    // TODO: Rename to "source" to align to Cloud Events spec?
    ClientID string

    // The data that identifies a single unique request.
    CorrelationData string

    // The timestamp of when the message was sent.
    Timestamp hlc.HybridLogicalClock

    // Any user-provided metadata values.
    Metadata map[string]string
}
```

<a name="Option"></a>
## type [Option](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/types.go#L35>)

Option represents any of the option types, and can be filtered and applied by the ApplyOptions methods on the option structs.

```go
type Option interface {
    // contains filtered or unexported methods
}
```

<a name="Raw"></a>
## type [Raw](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L26>)

Raw represents no encoding.

```go
type Raw struct{}
```

<a name="Raw.ContentType"></a>
### func \(Raw\) [ContentType](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L114>)

```go
func (Raw) ContentType() string
```

ContentType returns the raw MIME type.

<a name="Raw.Deserialize"></a>
### func \(Raw\) [Deserialize](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L129>)

```go
func (Raw) Deserialize(data []byte) ([]byte, error)
```

Deserialize returns the bytes unchanged.

<a name="Raw.IsUTF8"></a>
### func \(Raw\) [IsUTF8](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L119>)

```go
func (Raw) IsUTF8() bool
```

IsUTF8 indicates that raw is not known to be valid UTF8.

<a name="Raw.Serialize"></a>
### func \(Raw\) [Serialize](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/encoding.go#L124>)

```go
func (Raw) Serialize(t []byte) ([]byte, error)
```

Serialize returns the bytes unchanged.

<a name="RespondOption"></a>
## type [RespondOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L79>)

RespondOption represent a single per\-response option.

```go
type RespondOption interface {
    // contains filtered or unexported methods
}
```

<a name="RespondOptions"></a>
## type [RespondOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L82-L84>)

RespondOptions are the resolved per\-response options.

```go
type RespondOptions struct {
    Metadata map[string]string
}
```

<a name="RespondOptions.Apply"></a>
### func \(\*RespondOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L482-L485>)

```go
func (o *RespondOptions) Apply(opts []RespondOption, rest ...RespondOption)
```

Apply resolves the provided list of options.

<a name="SendOption"></a>
## type [SendOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L33>)

SendOption represent a single per\-send option.

```go
type SendOption interface {
    // contains filtered or unexported methods
}
```

<a name="SendOptions"></a>
## type [SendOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L36-L42>)

SendOptions are the resolved per\-send options.

```go
type SendOptions struct {
    Retain bool

    MessageExpiry uint32
    TopicTokens   map[string]string
    Metadata      map[string]string
}
```

<a name="SendOptions.Apply"></a>
### func \(\*SendOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L167-L170>)

```go
func (o *SendOptions) Apply(opts []SendOption, rest ...SendOption)
```

Apply resolves the provided list of options.

<a name="TelemetryHandler"></a>
## type [TelemetryHandler](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L48>)

TelemetryHandler is the user\-provided implementation of a single telemetry event handler. It is treated as blocking; all parallelism is handled by the library. This \*must\* be thread\-safe.

```go
type TelemetryHandler[T any] func(context.Context, *TelemetryMessage[T]) error
```

<a name="TelemetryMessage"></a>
## type [TelemetryMessage](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L52-L58>)

TelemetryMessage contains per\-message data and methods that are exposed to the telemetry handlers.

```go
type TelemetryMessage[T any] struct {

    // Ack provides a function to manually ack if enabled; it will be nil
    // otherwise.
    Ack func() error
    // contains filtered or unexported fields
}
```

<a name="TelemetryReceiver"></a>
## type [TelemetryReceiver](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L20-L25>)

TelemetryReceiver provides the ability to handle the receipt of a single telemetry.

```go
type TelemetryReceiver[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewTelemetryReceiver"></a>
### func [NewTelemetryReceiver](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L68-L74>)

```go
func NewTelemetryReceiver[T any](client mqtt.Client, encoding Encoding[T], topic string, handler TelemetryHandler[T], opt ...TelemetryReceiverOption) (tr *TelemetryReceiver[T], err error)
```

NewTelemetryReceiver creates a new telemetry receiver.

<a name="TelemetryReceiver[T].Listen"></a>
### func \(\*TelemetryReceiver\[T\]\) [Listen](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L137-L139>)

```go
func (tr *TelemetryReceiver[T]) Listen(ctx context.Context) (func(), error)
```

Listen to the MQTT telemetry topic. Returns a function to stop listening. Note that cancelling this context will cause the unsubscribe call to fail.

<a name="TelemetryReceiverOption"></a>
## type [TelemetryReceiverOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L28-L30>)

TelemetryReceiverOption represents a single telemetry receiver option.

```go
type TelemetryReceiverOption interface {
    // contains filtered or unexported methods
}
```

<a name="TelemetryReceiverOptions"></a>
## type [TelemetryReceiverOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L33-L43>)

TelemetryReceiverOptions are the resolved telemetry receiver options.

```go
type TelemetryReceiverOptions struct {
    ManualAck bool

    Concurrency      uint
    ExecutionTimeout time.Duration
    ShareName        string

    TopicNamespace string
    TopicTokens    map[string]string
    Logger         *slog.Logger
}
```

<a name="TelemetryReceiverOptions.Apply"></a>
### func \(\*TelemetryReceiverOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L245-L248>)

```go
func (o *TelemetryReceiverOptions) Apply(opts []TelemetryReceiverOption, rest ...TelemetryReceiverOption)
```

Apply resolves the provided list of options.

<a name="TelemetryReceiverOptions.ApplyOptions"></a>
### func \(\*TelemetryReceiverOptions\) [ApplyOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L262>)

```go
func (o *TelemetryReceiverOptions) ApplyOptions(opts []Option, rest ...Option)
```

ApplyOptions filters and resolves the provided list of options.

<a name="TelemetrySender"></a>
## type [TelemetrySender](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L15-L18>)

TelemetrySender provides the ability to send a single telemetry.

```go
type TelemetrySender[T any] struct {
    // contains filtered or unexported fields
}
```

<a name="NewTelemetrySender"></a>
### func [NewTelemetrySender](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L50-L55>)

```go
func NewTelemetrySender[T any](client mqtt.Client, encoding Encoding[T], topic string, opt ...TelemetrySenderOption) (ts *TelemetrySender[T], err error)
```

NewTelemetrySender creates a new telemetry sender.

<a name="TelemetrySender[T].Send"></a>
### func \(\*TelemetrySender\[T\]\) [Send](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L90-L94>)

```go
func (ts *TelemetrySender[T]) Send(ctx context.Context, val T, opt ...SendOption) (err error)
```

Send emits the telemetry. This will block until the message is ack'd.

<a name="TelemetrySenderOption"></a>
## type [TelemetrySenderOption](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L21-L23>)

TelemetrySenderOption represents a single telemetry sender option.

```go
type TelemetrySenderOption interface {
    // contains filtered or unexported methods
}
```

<a name="TelemetrySenderOptions"></a>
## type [TelemetrySenderOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L26-L30>)

TelemetrySenderOptions are the resolved telemetry sender options.

```go
type TelemetrySenderOptions struct {
    TopicNamespace string
    TopicTokens    map[string]string
    Logger         *slog.Logger
}
```

<a name="TelemetrySenderOptions.Apply"></a>
### func \(\*TelemetrySenderOptions\) [Apply](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L128-L131>)

```go
func (o *TelemetrySenderOptions) Apply(opts []TelemetrySenderOption, rest ...TelemetrySenderOption)
```

Apply resolves the provided list of options.

<a name="TelemetrySenderOptions.ApplyOptions"></a>
### func \(\*TelemetrySenderOptions\) [ApplyOptions](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L145>)

```go
func (o *TelemetrySenderOptions) ApplyOptions(opts []Option, rest ...Option)
```

ApplyOptions filters and resolves the provided list of options.

<a name="WithCacheTTL"></a>
## type [WithCacheTTL](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L76>)

WithCacheTTL indicates how long results of this command will live in the cache. This is only valid for idempotent commands.

```go
type WithCacheTTL time.Duration
```

<a name="WithConcurrency"></a>
## type [WithConcurrency](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L10>)

WithConcurrency indicates how many handlers can execute in parallel.

```go
type WithConcurrency uint
```

<a name="WithExecutionTimeout"></a>
## type [WithExecutionTimeout](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L13>)

WithExecutionTimeout applies a context timeout to the handler execution.

```go
type WithExecutionTimeout time.Duration
```

<a name="WithFencingToken"></a>
## type [WithFencingToken](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L66>)

WithFencingToken provides a fencing token to be used by the executor.

```go
type WithFencingToken hlc.HybridLogicalClock
```

<a name="WithIdempotent"></a>
## type [WithIdempotent](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_executor.go#L72>)

WithIdempotent marks the command as idempotent.

```go
type WithIdempotent bool
```

<a name="WithManualAck"></a>
## type [WithManualAck](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_receiver.go#L62>)

WithManualAck indicates that the handler is responsible for manually acking the telemetry message.

```go
type WithManualAck bool
```

<a name="WithMessageExpiry"></a>
## type [WithMessageExpiry](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L19>)

WithMessageExpiry applies an MQTT message expiry \(in seconds\).

```go
type WithMessageExpiry uint32
```

<a name="WithMetadata"></a>
## type [WithMetadata](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L31>)

WithMetadata specifies user\-provided metadata values.

```go
type WithMetadata map[string]string
```

<a name="WithResponseTopic"></a>
## type [WithResponseTopic](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L57>)

WithResponseTopic specifies a translation function from the request topic to the response topic. Note that this overrides any provided response topic prefix or suffix.

```go
type WithResponseTopic func(string) string
```

<a name="WithResponseTopicPrefix"></a>
## type [WithResponseTopicPrefix](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L60>)

WithResponseTopicPrefix specifies a custom prefix for the response topic.

```go
type WithResponseTopicPrefix string
```

<a name="WithResponseTopicSuffix"></a>
## type [WithResponseTopicSuffix](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/command_invoker.go#L63>)

WithResponseTopicSuffix specifies a custom suffix for the response topic.

```go
type WithResponseTopicSuffix string
```

<a name="WithRetain"></a>
## type [WithRetain](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/telemetry_sender.go#L46>)

WithRetain indicates that the telemetry event should be retained by the broker.

```go
type WithRetain bool
```

<a name="WithShareName"></a>
## type [WithShareName](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L16>)

WithShareName connects this listener to a shared MQTT subscription.

```go
type WithShareName string
```

<a name="WithTopicNamespace"></a>
## type [WithTopicNamespace](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L35>)

WithTopicNamespace specifies a namespace that will be prepended to the topic.

```go
type WithTopicNamespace string
```

<a name="WithTopicTokenNamespace"></a>
## type [WithTopicTokenNamespace](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L28>)

WithTopicTokenNamespace specifies a namespace that will be prepended to all previously\-specified topic tokens. Topic tokens specified after this option will not be namespaced, allowing this to differentiate user tokens from system tokens.

```go
type WithTopicTokenNamespace string
```

<a name="WithTopicTokens"></a>
## type [WithTopicTokens](<https://github.com/Azure/iot-operations-sdks/blob/main/go/protocol/common_options.go#L22>)

WithTopicTokens specifies topic token values.

```go
type WithTopicTokens map[string]string
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)

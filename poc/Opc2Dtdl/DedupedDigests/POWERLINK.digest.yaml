SpecUri: http://opcfoundation.org/UA/POWERLINK/
SpecVer: 1.0.0

DataTypes:
- UADataType: [ POWERLINK:28, POWERLINK:PowerlinkNMTResetCmdEnumeration ]
  DisplayName: "PowerlinkNMTResetCmdEnumeration"
  Description: "This DataType is an Enumeration that represents the NMT reset commands for POWERLINK"
  Enums:
    NMTResetNode: 40
    NMTResetCommunication: 41
    NMTResetConfiguration: 42
    NMTSwReset: 43
    NMTInvalidService: 255
- UADataType: [ POWERLINK:24, POWERLINK:PowerlinkNMTStateEnumeration ]
  DisplayName: "PowerlinkNMTStateEnumeration"
  Description: "This DataType is an enumeration that represents the NMT State"
  Enums:
    NMT_GS_OFF : 0
    NMT_GS_INITIALISING: 25
    NMT_GS_RESET_APPLICATION: 41
    NMT_GS_RESET_COMMUNICATION: 57
    NMT_GS_RESET_CONFIGURATION: 121
    NMT_XS_NOT_ACTIVE: 28
    NMT_XS_PRE_OPERATIONAL_1: 29
    NMT_XS_PRE_OPERATIONAL_2: 93
    NMT_XS_READY_TO_OPERATE: 109
    NMT_XS_OPERATIONAL: 253
    NMT_CS_STOPPED: 77
    NMT_XS_BASIC_ETHERNET: 30
- UADataType: [ POWERLINK:26, POWERLINK:ErrorRegisterBits ]
  DisplayName: "ErrorRegisterBits"
  Description: "Represents the values of the POWERLINK ErrorRegister"
  Enums:
    Generic_error: 0
    Current: 1
    Voltage: 2
    Temperature: 3
    Communication_error: 4
    Device_profile_specific: 5
    Reserved: 6
    Manufacturer_specific: 7
- UADataType: [ POWERLINK:25, POWERLINK:PowerlinkAttribute ]
  DisplayName: "PowerlinkAttribute"
  Description: "Represents the POWERLINK entry attributes"
  Enums:
    Const: 0
    Read: 1
    Write: 2
    Input: 3
    Output: 4
    Store: 5
    ValidOnReset: 6
    DefaultMapping: 7
    RPDO: 8
    TPDO: 9
- UADataType: [ POWERLINK:27, POWERLINK:PowerlinkErrorEntryDataType ]
  DisplayName: "PowerlinkErrorEntryDataType"
  Description: "Represents the entries of the POWERLINK Object ERR_History_ADOM (Object 1003h, SubIndex 1..254)"
  Fields:
    entryType: [ UInt16, 0 ]
    errorCode: [ UInt16, 0 ]
    timeStamp: [ UInt64, 0 ]
    additionalInformation: [ UInt64, 0 ]
- UADataType: [ POWERLINK:29, POWERLINK:PowerlinkIpAddressDataType ]
  DisplayName: "PowerlinkIpAddressDataType"
  Description: "Structure DataType PowerlinkIpAddressDataType to represent POWERLINK Objects of the POWERLINK data type IP_ADDRESS"
  Fields:
    b1: [ Byte, 0 ]
    b2: [ Byte, 0 ]
    b3: [ Byte, 0 ]
    b4: [ Byte, 0 ]
- UADataType: [ POWERLINK:30, POWERLINK:PowerlinkPDOMappingEntryDataType ]
  DisplayName: "PowerlinkPDOMappingEntryDataType"
  Description: "Structure DataType PowerlinkPDOMappingEntryDataType to represent the entries of POWERLINK Objects like PDO_RxCommParam_00h_REC"
  Fields:
    length: [ UInt16, 0 ]
    offset: [ UInt16, 0 ]
    reserved: [ Byte, 0 ]
    subIndex: [ Byte, 0 ]
    index: [ UInt16, 0 ]
- UADataType: [ DI:6244, DI:DeviceHealthEnumeration ]
  DisplayName: "DeviceHealthEnumeration"
  Description: "This device functions normally."
  Enums:
    NORMAL: 0
    FAILURE: 1
    CHECK_FUNCTION: 2
    OFF_SPEC: 3
    MAINTENANCE_REQUIRED: 4
- UADataType: [ DI:6522, DI:FetchResultDataType ]
  Bases:
  - Structure
- UADataType: [ DI:15888, DI:TransferResultErrorDataType ]
  DisplayName: "TransferResultErrorDataType"
  Fields:
    Status: [ Int32, 0 ]
    Diagnostics: [ DiagnosticInfo, 0 ]
- UADataType: [ DI:15889, DI:TransferResultDataDataType ]
  DisplayName: "TransferResultDataDataType"
  Fields:
    SequenceNumber: [ Int32, 0 ]
    EndOfResults: [ Boolean, 0 ]
    ParameterDefs: [ DI:ParameterResultDataType, 1 ]
- UADataType: [ DI:6525, DI:ParameterResultDataType ]
  DisplayName: "ParameterResultDataType"
  Fields:
    NodePath: [ QualifiedName, 1 ]
    StatusCode: [ StatusCode, 0 ]
    Diagnostics: [ DiagnosticInfo, 0 ]
- UADataType: [ DI:331, DI:SoftwareVersionFileType ]
  DisplayName: "SoftwareVersionFileType"
  Description: "The currently used version of the software identified by the CurrentVersion Object."
  Enums:
    Current: 0
    Pending: 1
    Fallback: 2
- UADataType: [ DI:333, DI:UpdateBehavior ]
  DisplayName: "UpdateBehavior"
  Description: "If KeepsParameters is not set, the device will lose its configuration during update. The Client should do a backup of the parameters before the update and restore them afterwards."
  Enums:
    KeepsParameters: 0
    WillDisconnect: 1
    RequiresPowerCycle: 2
    WillReboot: 3
    NeedsPreparation: 4

DefinedTypes:

  POWERLINK:PowerlinkProtocolType:
  - [ UAObjectType, POWERLINK:6, POWERLINK:PowerlinkProtocolType ]
  - DisplayName: "PowerlinkProtocolType"
  - HasSubtype_reverse:
    - [ UAObjectType, DI:1006, DI:ProtocolType ]

  POWERLINK:PowerlinkConnectionPointType:
  - [ UAObjectType, POWERLINK:3, POWERLINK:PowerlinkConnectionPointType, Abstract ]
  - DisplayName: "PowerlinkConnectionPointType"
  - Description: "defines the POWERLINK Objects, which are common for both POWERLINK Managing Node and POWERLINK Controlled Node"
  - HasComponent:
    - [ UAObject, POWERLINK:59, DI:<ProfileId> ]
    - DisplayName: "<ProfileId>"
    - HasModellingRule:
      - [ UAObject, 11510, MandatoryPlaceholder ]
    - HasTypeDefinition:
      - [ UAObjectType, POWERLINK:6, POWERLINK:PowerlinkProtocolType ]
  - HasComponent:
    - [ UAObject, POWERLINK:63, POWERLINK:Configuration ]
    - DisplayName: "Configuration"
    - HasTypeDefinition:
      - [ UAObjectType, DI:1005, DI:FunctionalGroupType ]
    - HasModellingRule:
      - [ UAObject, 78, Mandatory ]
  - HasComponent:
    - [ UAObject, POWERLINK:65, POWERLINK:Control ]
    - DisplayName: "Control"
    - HasTypeDefinition:
      - [ UAObjectType, DI:1005, DI:FunctionalGroupType ]
    - HasModellingRule:
      - [ UAObject, 78, Mandatory ]
  - HasComponent:
    - [ UAObject, POWERLINK:60, POWERLINK:Diagnostics ]
    - DisplayName: "Diagnostics"
    - HasTypeDefinition:
      - [ UAObjectType, DI:1005, DI:FunctionalGroupType ]
    - HasModellingRule:
      - [ UAObject, 78, Mandatory ]
  - HasSubtype_reverse:
    - [ UAObjectType, DI:6308, DI:ConnectionPointType ]
  - HasComponent:
    - [ UAObject, POWERLINK:66, POWERLINK:SdoServices ]
    - DisplayName: "SdoServices"
    - HasTypeDefinition:
      - [ UAObjectType, DI:1005, DI:FunctionalGroupType ]
    - HasModellingRule:
      - [ UAObject, 78, Mandatory ]
  - HasComponent:
    - [ UAObject, POWERLINK:64, POWERLINK:Status ]
    - DisplayName: "Status"
    - HasTypeDefinition:
      - [ UAObjectType, DI:1005, DI:FunctionalGroupType ]
    - HasModellingRule:
      - [ UAObject, 78, Mandatory ]

  POWERLINK:PowerlinkCnConnectionPointType:
  - [ UAObjectType, POWERLINK:4, POWERLINK:PowerlinkCnConnectionPointType ]
  - DisplayName: "PowerlinkCnConnectionPointType"
  - HasComponent:
    - [ UAObject, POWERLINK:52, POWERLINK:<DeviceProfileIdentifier> ]
    - DisplayName: "<DeviceProfileIdentifier>"
    - HasModellingRule:
      - [ UAObject, 11508, OptionalPlaceholder ]
    - HasTypeDefinition:
      - [ UAObjectType, POWERLINK:1, POWERLINK:PowerlinkDeviceProfileType ]
  - HasSubtype_reverse:
    - [ UAObjectType, POWERLINK:3, POWERLINK:PowerlinkConnectionPointType, Abstract ]

  POWERLINK:PowerlinkMnConnectionPointType:
  - [ UAObjectType, POWERLINK:5, POWERLINK:PowerlinkMnConnectionPointType ]
  - DisplayName: "PowerlinkMnConnectionPointType"
  - HasSubtype_reverse:
    - [ UAObjectType, POWERLINK:3, POWERLINK:PowerlinkConnectionPointType, Abstract ]

  POWERLINK:PowerlinkDeviceType:
  - [ UAObjectType, POWERLINK:2, POWERLINK:PowerlinkDeviceType ]
  - DisplayName: "PowerlinkDeviceType"
  - Description: "example for a DeviceType that only implements POWERLINK Managing Node (MN) and/or POWERLINK Controlled Node (CN) interfaces"
  - HasComponent:
    - [ UAObject, POWERLINK:43, POWERLINK:<CNIdentifier> ]
    - DisplayName: "<CNIdentifier>"
    - HasModellingRule:
      - [ UAObject, 11508, OptionalPlaceholder ]
    - HasTypeDefinition:
      - [ UAObjectType, POWERLINK:4, POWERLINK:PowerlinkCnConnectionPointType ]
  - HasComponent:
    - [ UAObject, POWERLINK:70, POWERLINK:<MNIdentifier> ]
    - DisplayName: "<MNIdentifier>"
    - HasModellingRule:
      - [ UAObject, 11508, OptionalPlaceholder ]
    - HasTypeDefinition:
      - [ UAObjectType, POWERLINK:5, POWERLINK:PowerlinkMnConnectionPointType ]
  - HasSubtype_reverse:
    - [ UAObjectType, DI:1002, DI:DeviceType ]

  POWERLINK:PowerlinkDeviceProfileType:
  - [ UAObjectType, POWERLINK:1, POWERLINK:PowerlinkDeviceProfileType ]
  - DisplayName: "PowerlinkDeviceProfileType"
  - HasProperty:
    - [ UAVariable, POWERLINK:444, POWERLINK:IndexRangeSize, UInt16, 0, 0 ]
    - DisplayName: "IndexRangeSize"
    - HasModellingRule:
      - [ UAObject, 78, Mandatory ]
  - HasProperty:
    - [ UAVariable, POWERLINK:443, POWERLINK:IndexRangeStart, UInt16, 0, 0 ]
    - DisplayName: "IndexRangeStart"
    - HasModellingRule:
      - [ UAObject, 78, Mandatory ]
  - HasSubtype_reverse:
    - [ UAObjectType, DI:1001, DI:TopologyElementType ]

{
  "$schema": "./connector-metadata-schema.json",
  "name": "RestConnector",
  "description": "Connector for polling a REST server for information",
  "version": "1.0.0",
  "maintainer": "dev@example.com",
  "vendor": "Contoso",
  "imageConfigurationSettings": {
    "imageName": "RestConnector",
    "tag": "1.0.0"
  },
  "supportedArchitectures": ["linux/amd64", "linux/arm64"],
  "sourceCode": {
    "language": ".NET",
    "languageVersion": ".NET 8.0",
    "sdks": {
      "mqttPackageVersion": "1.0.0",
      "servicesPackageVersion": "1.0.0",
      "connectorPackageVersion": "1.0.0"
    }
  },
  "aioMetadata": {
    "aioMinVersion": "1.0.0",
    "aioMaxVersion": "2.0.0"
  },
  "inboundEndpoints": [
    {
      "endpointType": "Microsoft.Http",
      "description": "An HTTP endpoint",
      "version": "2.0",
      "fields": {
        "address": {
          "input": "required",
          "exampleValue": "https://www.contoso.com/someAddress",
          "regex": ["/^(https?:\/\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\/\\w \\.-]*)*\/?$/"],
          "description": "The HTTP address to connect to"
        }
      },
      "supportedAuthenticationTypes": ["usernamePassword", "x509", "anonymous"],
      "datasets" : {
        "limits": { 
          "minimum": 0
        },
        "fields": {
          "dataSource": {
            "input": "required",
            "exampleValue": "some/path"
          },
          "typeRef": {
            "input": "unsupported"
          }
        },
        "destinations": {
          "supportedDestinations" : ["Mqtt", "BrokerStateStore"],
          "defaultDestination" : {
            "destination": "BrokerStateStore",
            "key": "{deviceName}/{inboundEndpointName}/{assetName}/someDssKey"
          }
        },
        "datasetConfigurationSchema" : {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "$id": "https://contoso.com/datasetConfig.schema.json",
          "title": "Dataset Config Schema",
          "description": "The JSON schema for both the default dataset configuration field and all individual dataset-specific configuration fields",
          "type": "object",
          "properties": {
            "SamplingInterval": {
              "description": "How frequently to sample each dataset by default (in milliseconds)",
              "type": "integer"
            }
          }
        },
        "dataPoints": {
          "limits": { 
            "minimum": 0
          },
          "dataSource": {
            "input": "required",
            "exampleValue": "some/path"
          },
          "typeRef": {
            "input": "unsupported"
          },
          "dataPointConfigurationSchema" : {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://contoso.com/dataPointConfig.schema.json",
            "title": "Datapoint Config Schema",
            "description": "The JSON schema for both the default datapoint configuration field and all individual datapoint-specific configuration fields",
            "type": "object",
            "properties": {
              "SamplingInterval": {
                "description": "How frequently to sample each datapoint by default (in milliseconds)",
                "type": "integer"
              }
            }
          },
          "alternativeTypeName": {
            "singular": "tag",
            "plural": "tags"
          }
        }
      },
      "eventGroups": {
        "limits": { 
          "minimum": 1
        },
        "fields": {
          "dataSource": {
            "input": "required",
            "exampleValue": "some/path"
          },
          "typeRef": {
            "input": "unsupported"
          }
        },
        "eventGroupConfigurationSchema" : {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "$id": "https://contoso.com/eventConfig.schema.json",
          "title": "Event Config Schema",
          "description": "The JSON schema for both the default event group configuration field and all event group-specific configuration fields",
          "type": "object",
          "properties": {
            "SomeEventGroupsProperty": {
              "description": "Some configuration that is relevant to event groups",
              "type": "integer"
            }
          }
        },
        "events": {
          "destinations": {
            "supportedDestinations" : ["Mqtt"],
            "defaultDestination" : {
              "destination": "Mqtt",
              "topic": "{namespace}/{deviceName}/myDefaultPath",
              "qos": 1,
              "ttl": 10,
              "retain": "never"
            }
          },
          "limits": { 
            "minimum": 0
          },
          "fields": {
            "dataSource": {
              "input": "required",
              "exampleValue": "some/path"
            },
            "typeRef": {
              "input": "unsupported"
            }
          },
          "eventConfigurationSchema" : {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://contoso.com/eventConfig.schema.json",
            "title": "Event Datapoint Config Schema",
            "description": "The JSON schema for both the default event configuration field and all event-specific configuration fields",
            "type": "object",
            "properties": {
              "SomeEventsProperty": {
                "description": "Some configuration that is relevant to events",
                "type": "integer"
              }
            }
          }
        }
      },
      "streams": {
        "limits" : { 
          "minimum": 0
        },
        "fields": {
          "typeRef": {
            "input": "required",
            "exampleValue": "someTypeRef"
          }
        },
        "destinations": {
          "supportedDestinations" : ["Mqtt", "Storage"],
          "defaultDestination" : {
            "destination": "Storage",
            "path": "{assetName}/some/storage/path"
          }
        }
      }
    },
    {
      "endpointType": "Microsoft.TCP",
      "description": "A TCP endpoint",
      "version": "2.0",
      "fields": {
        "address": {
          "input": "required",
          "exampleValue": "tcp://example.com:8080/resource?key=value",
          "regex": ["someRegex", "someOtherRegex"],
          "description": "The TCP address to connect to"
        }
      },
      "supportedAuthenticationTypes": ["usernamePassword", "x509", "anonymous"],
      "eventGroups": {
        "limits": { 
          "minimum": 1
        },
        "fields": {
          "dataSource": {
            "input": "required",
            "exampleValue": "some/path"
          },
          "typeRef": {
            "input": "unsupported"
          }
        },
        "eventGroupConfigurationSchema" : {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "$id": "https://contoso.com/eventConfig.schema.json",
          "title": "Event Config Schema",
          "description": "The JSON schema for both the default event group configuration field and all event group-specific configuration fields",
          "type": "object",
          "properties": {
            "SomeEventGroupsProperty": {
              "description": "Some configuration that is relevant to event groups",
              "type": "integer"
            }
          }
        },
        "events": {
          "destinations": {
            "supportedDestinations" : ["Mqtt"],
            "defaultDestination" : {
              "destination": "Mqtt",
              "topic": "{namespace}/{deviceName}/myDefaultPath",
              "qos": 1,
              "ttl": 10,
              "retain": "never"
            }
          },
          "limits": { 
            "minimum": 0
          },
          "fields": {
            "dataSource": {
              "input": "required",
              "exampleValue": "some/path"
            },
            "typeRef": {
              "input": "unsupported"
            }
          },
          "eventConfigurationSchema" : {
            "$schema": "http://json-schema.org/draft-07/schema#",
            "$id": "https://contoso.com/eventConfig.schema.json",
            "title": "Event Datapoint Config Schema",
            "description": "The JSON schema for both the default event configuration field and all event-specific configuration fields",
            "type": "object",
            "properties": {
              "SomeEventsProperty": {
                "description": "Some configuration that is relevant to events",
                "type": "integer"
              }
            }
          }
        }
      }
    }
  ],
  "secrets": [
    {
      "secretAlias": "someSecretAlias",
      "secretDescription": "some secret's description",
      "isOptional": false
    },
    {
      "secretAlias": "someOptionalSecretAlias",
      "secretDescription": "some optional secret's description",
      "isOptional": true
    }
  ],
  "storageVolumes": [
    {
        "mountPath": "somePath",
        "description": "some description"
    },
    {
        "mountPath": "someOtherPath",
        "description": "some other description"
    }
  ],
  "connectorConfigurationKeys": [
    {
      "key": "someKey",
      "description": "someDescription"
    },
    {
      "key": "someOtherKey",
      "description": "someDescription"
    }
  ],
  "recommendedAllocationPolicy": "bucketized",
  "recommendedReplicas": 1
}
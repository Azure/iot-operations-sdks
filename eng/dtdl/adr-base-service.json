{
  "@context": [
    "dtmi:dtdl:context;4#limitless",
    "dtmi:dtdl:limits:onvif;1",
    "dtmi:dtdl:extension:mqtt;3",
    "dtmi:dtdl:extension:requirement;1"
  ],
  "@id": "dtmi:com:microsoft:akri:AdrBaseService;1",
  "@type": [
    "Interface",
    "Mqtt"
  ],
  "commandTopic": "akri/connector/resources/{ex:connectorClientId}/{ex:deviceName}/{ex:inboundEndpointName}/{commandName}",
  "telemetryTopic": "akri/connector/resources/telemetry/{ex:connectorClientId}/{ex:deviceName}/{ex:inboundEndpointName}/{telemetryName}",
  "payloadFormat": "Json/ecma/404",
  "contents": [
    {
      "@type": "Command",
      "name": "getDevice",
      "response": {
        "name": "getDeviceResponse",
        "schema": {
          "@type": [ "Object", "Result" ],
          "fields": [
            {
              "@type": ["Field", "NormalResult"],
              "name": "device",
              "schema": "dtmi:com:microsoft:akri:Device;1"
            },
            {
              "@type": ["Field", "ErrorResult"],
              "name": "getDeviceError",
              "schema": "dtmi:com:microsoft:akri:AkriServiceError;1"
            }
          ]
        }
      }
    },
    {
      "@type": "Command",
      "name": "getAsset",
      "request": {
        "name": "assetName",
        "schema": "string"
      },
      "response": {
        "name": "asset",
        "schema": "dtmi:com:microsoft:akri:Asset;1"
      }
    },
    {
      "@type": "Command",
      "name": "updateDeviceStatus",
      "request": {
        "name": "deviceStatusUpdate",
        "schema": "dtmi:com:microsoft:akri:DeviceStatus;1"
      },
      "response": {
        "name": "updatedDevice",
        "schema": "dtmi:com:microsoft:akri:Device;1"
      }
    },
    {
      "@type": "Command",
      "name": "updateAssetStatus",
      "request": {
        "name": "assetStatusUpdate",
        "schema": {
          "@type": "Object",
          "fields": [
            {
              "@type": ["Field", "Required"],
              "name": "assetName",
              "schema": "string"
            },
            {
              "@type": ["Field", "Required"],
              "name": "assetStatus",
              "schema": "dtmi:com:microsoft:akri:AssetStatus;1"
            }
          ]
        }
      },
      "response": {
        "name": "updatedAsset",
        "schema": "dtmi:com:microsoft:akri:Asset;1"
      }
    },
    {
      "@type": "Telemetry",
      "name": "deviceUpdateEvent",
      "schema": {
        "@type": "Object",
        "fields": [
          {
            "@type": ["Field", "Required"],
            "name": "device",
            "schema": "dtmi:com:microsoft:akri:Device;1"
          }
        ]
      }
    },
    {
      "@type": "Telemetry",
      "name": "assetUpdateEvent",
      "schema": {
        "@type": "Object",
        "fields": [
          {
            "@type": ["Field", "Required"],
            "name": "assetName",
            "schema": "string"
          },
          {
            "@type": ["Field", "Required"],
            "name": "asset",
            "schema": "dtmi:com:microsoft:akri:Asset;1"
          }
        ]
      }
    },
    {
      "@type": "Command",
      "name": "setNotificationPreferenceForDeviceUpdates",
      "request": {
        "name": "notificationPreferenceRequest",
        "schema": "dtmi:com:microsoft:akri:NotificationPreference;1"
      },
      "response": {
        "name": "notificationPreferenceResponse",
        "schema": "dtmi:com:microsoft:akri:NotificationPreferenceResponse;1"
      }
    },
    {
      "@type": "Command",
      "name": "setNotificationPreferenceForAssetUpdates",
      "request": {
        "name": "notificationPreferenceRequest",
        "schema": {
          "@type": "Object",
          "fields": [
            {
              "@type": ["Field", "Required"],
              "name": "assetName",
              "schema": "string"
            },
            {
              "@type": ["Field", "Required"],
              "name": "notificationPreference",
              "schema": "dtmi:com:microsoft:akri:NotificationPreference;1"
            }
          ]
        }
      },
      "response": {
        "name": "notificationPreferenceResponse",
        "schema": "dtmi:com:microsoft:akri:NotificationPreferenceResponse;1"
      }
    },
    {
      "@type": "Command",
      "name": "createOrUpdateDiscoveredAsset",
      "request": {
        "name": "discoveredAssetRequest",
        "schema": {
          "@type": "Object",
          "fields": [
            {
              "@type": ["Field", "Required"],
              "name": "discoveredAssetName",
              "schema": "string"
            },
            {
              "@type": ["Field", "Required"],
              "name": "discoveredAsset",
              "schema": "dtmi:com:microsoft:akri:DiscoveredAsset;1"
            }
          ]
        }
      },
      "response": {
        "name": "createOrUpdateDiscoveredAssetResponse",
        "schema": {
          "@type": [ "Object", "Result" ],
          "fields": [
            {
              "@type": ["Field", "NormalResult"],
              "name": "discoveredAssetResponse",
              "schema": "dtmi:com:microsoft:akri:DiscoveredAssetResponse;1"
            },
            {
              "@type": ["Field", "ErrorResult"],
              "name": "createOrUpdateDiscoveredAssetError",
              "schema": "dtmi:com:microsoft:akri:AkriServiceError;1"
            }
          ]
        }
      }
    }
  ],
  "schemas": [
    {
      "@id": "dtmi:com:microsoft:akri:Device;1",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": [ "Field", "Required" ],
          "@id": "dtmi:com:microsoft:akri:DeviceSpecification;1",
          "name": "specification",
          "schema": {
            "@type": "Object",
            "fields": [
              {
                "@type": "Field",
                "name": "attributes",
                "schema": {
                  "@type": "Map",
                  "mapKey": {
                    "name": "attributeKey",
                    "schema": "string"
                  },
                  "mapValue": {
                    "name": "attributeValue",
                    "schema": "string"
                  }
                }
              },
              {
                "@type": "Field",
                "name": "discoveredDeviceRef",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "enabled",
                "schema": "boolean"
              },
              {
                "@type": "Field",
                "@id": "dtmi:com:microsoft:akri:DeviceEndpoint;1",
                "name": "endpoints",
                "schema": {
                  "@type": "Object",
                  "fields": [
                    {
                      "@type": "Field",
                      "name": "inbound",
                      "schema": {
                        "@type": "Map",
                        "mapKey": {
                          "name": "endpointName",
                          "schema": "string"
                        },
                        "mapValue": {
                          "name": "inboundEndpoint",
                          "schema": {
                            "@type": "Object",
                            "fields": [
                              {
                                "@type": "Field",
                                "name": "additionalConfiguration",
                                "schema": "string"
                              },
                              {
                                "@type": [ "Field", "Required" ],
                                "name": "address",
                                "schema": "string"
                              },
                              {
                                "@type": "Field",
                                "name": "authentication",
                                "schema": {
                                  "@type": "Object",
                                  "fields": [
                                    {
                                      "@type": [ "Field", "Required" ],
                                      "name": "method",
                                      "schema": {
                                        "@type": "Enum",
                                        "valueSchema": "string",
                                        "enumValues": [
                                          {
                                            "name": "Anonymous",
                                            "enumValue": "Anonymous"
                                          },
                                          {
                                            "name": "Certificate",
                                            "enumValue": "Certificate"
                                          },
                                          {
                                            "name": "UsernamePassword",
                                            "enumValue": "UsernamePassword"
                                          }
                                        ]
                                      }
                                    },
                                    {
                                      "@type": "Field",
                                      "name": "usernamePasswordCredentials",
                                      "schema": {
                                        "@type": "Object",
                                        "fields": [
                                          {
                                            "@type": [ "Field", "Required" ],
                                            "name": "usernameSecretName",
                                            "schema": "string"
                                          },
                                          {
                                            "@type": [ "Field", "Required" ],
                                            "name": "passwordSecretName",
                                            "schema": "string"
                                          }
                                        ]
                                      }
                                    },
                                    {
                                      "@type": "Field",
                                      "name": "x509Credentials",
                                      "schema": {
                                        "@type": "Object",
                                        "fields": [
                                          {
                                            "@type": [ "Field", "Required" ],
                                            "name": "certificateSecretName",
                                            "schema": "string"
                                          }
                                        ]
                                      }
                                    }
                                  ]
                                }
                              },
                              {
                                "@type": [ "Field", "Required" ],
                                "@id": "dtmi:com:microsoft:akri:DeviceInboundEndpointType;1",
                                "name": "endpointType",
                                "schema": "string"
                              },
                              {
                                "@type": "Field",
                                "name": "trustSettings",
                                "schema": {
                                  "@type": "Object",
                                  "fields": [
                                    {
                                      "@type": "Field",
                                      "name": "issuerList",
                                      "schema": "string"
                                    },
                                    {
                                      "@type": "Field",
                                      "name": "trustList",
                                      "schema": "string"
                                    }
                                  ]
                                }
                              },
                              {
                                "@type": "Field",
                                "name": "version",
                                "schema": "string"
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "@type": "Field",
                      "name": "outbound",
                      "schema": {
                        "@type": "Object",
                        "fields": [
                          {
                            "@type": ["Field", "Required"],
                            "name": "assigned",
                            "schema": {
                              "@type": "Map",
                              "mapKey": {
                                "name": "assignedOutboundEndpointName",
                                "schema": "string"
                              },
                              "mapValue": {
                                "name": "assignedOutboundEndpoint",
                                "schema": "dtmi:com:microsoft:akri:DeviceOutboundEndpoint;1"
                              }
                            }
                          },
                          {
                            "@type": "Field",
                            "name": "unassigned",
                            "schema": {
                              "@type": "Map",
                              "mapKey": {
                                "name": "unassignedOutboundEndpointName",
                                "schema": "string"
                              },
                              "mapValue": {
                                "name": "unassignedOutboundEndpoint",
                                "schema": "dtmi:com:microsoft:akri:DeviceOutboundEndpoint;1"
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "@type": "Field",
                "name": "externalDeviceId",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "lastTransitionTime",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "manufacturer",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "model",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "operatingSystem",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "operatingSystemVersion",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "uuid",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "version",
                "schema": "unsignedLong"
              }
            ]
          }
        },
        {
          "@type": "Field",
          "name": "status",
          "schema": "dtmi:com:microsoft:akri:DeviceStatus;1"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:Asset;1",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "@id": "dtmi:com:microsoft:akri:AssetSpecification;1",
          "name": "specification",
          "schema": {
            "@type": "Object",
            "fields": [
              {
                "@type": "Field",
                "name": "assetTypeRefs",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "string"
                }
              },
              {
                "@type": "Field",
                "name": "attributes",
                "schema": {
                  "@type": "Map",
                  "mapKey": {
                    "name": "attributeKey",
                    "schema": "string"
                  },
                  "mapValue": {
                    "name": "attributeValue",
                    "schema": "string"
                  }
                }
              },
              {
                "@type": "Field",
                "@id": "dtmi:com:microsoft:akri:AssetDataset;1",
                "name": "datasets",
                "schema": {
                  "@type": "Array",
                  "elementSchema": {
                    "@type": "Object",
                    "fields": [
                      {
                        "@type": "Field",
                        "@id": "dtmi:com:microsoft:akri:AssetDatasetDataPoint;1",
                        "name": "dataPoints",
                        "schema": {
                          "@type": "Array",
                          "elementSchema": {
                            "@type": "Object",
                            "fields": [
                              {
                                "@type": "Field",
                                "name": "dataPointConfiguration",
                                "schema": "string"
                              },
                              {
                                "@type": ["Field", "Required"],
                                "name": "dataSource",
                                "schema": "string"
                              },
                              {
                                "@type": ["Field", "Required"],
                                "name": "name",
                                "schema": "string"
                              },
                              {
                                "@type": "Field",
                                "name": "typeRef",
                                "schema": "string"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "@type": "Field",
                        "name": "dataSource",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "datasetConfiguration",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "destinations",
                        "schema": {
                          "@type": "Array",
                          "elementSchema": "dtmi:com:microsoft:akri:DatasetDestination;1"
                        }
                      },
                      {
                        "@type": ["Field", "Required"],
                        "name": "name",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "typeRef",
                        "schema": "string"
                      }
                    ]
                  }
                }
              },
              {
                "@type": "Field",
                "name": "defaultDatasetsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultDatasetsDestinations",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:DatasetDestination;1"
                }
              },
              {
                "@type": "Field",
                "name": "defaultEventsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultEventsDestinations",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
                }
              },
              {
                "@type": "Field",
                "name": "defaultManagementGroupsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultStreamsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultStreamsDestinations",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
                }
              },
              {
                "@type": "Field",
                "name": "description",
                "schema": "string"
              },
              {
                "@type": ["Field", "Required"],
                "name": "deviceRef",
                "schema": "dtmi:com:microsoft:akri:AssetDeviceRef;1"
              },
              {
                "@type": "Field",
                "name": "discoveredAssetRefs",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "string"
                }
              },
              {
                "@type": "Field",
                "name": "displayName",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "documentationUri",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "enabled",
                "schema": "boolean"
              },
              {
                "@type": "Field",
                "@id": "dtmi:com:microsoft:akri:AssetEvent;1",
                "name": "events",
                "schema": {
                  "@type": "Array",
                  "elementSchema": {
                    "@type": "Object",
                    "fields": [
                      {
                        "@type": "Field",
                        "@id": "dtmi:com:microsoft:akri:AssetEventDataPoint;1",
                        "name": "dataPoints",
                        "schema": {
                          "@type": "Array",
                          "elementSchema": {
                            "@type": "Object",
                            "fields": [
                              {
                                "@type": "Field",
                                "name": "dataPointConfiguration",
                                "schema": "string"
                              },
                              {
                                "@type": ["Field", "Required"],
                                "name": "dataSource",
                                "schema": "string"
                              },
                              {
                                "@type": ["Field", "Required"],
                                "name": "name",
                                "schema": "string"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "@type": "Field",
                        "name": "destinations",
                        "schema": {
                          "@type": "Array",
                          "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
                        }
                      },
                      {
                        "@type": "Field",
                        "name": "eventConfiguration",
                        "schema": "string"
                      },
                      {
                        "@type": ["Field", "Required"],
                        "name": "eventNotifier",
                        "schema": "string"
                      },
                      {
                        "@type": ["Field", "Required"],
                        "name": "name",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "typeRef",
                        "schema": "string"
                      }
                    ]
                  }
                }
              },
              {
                "@type": "Field",
                "name": "externalAssetId",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "hardwareRevision",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "lastTransitionTime",
                "schema": "string"
              },
              {
                "@type": "Field",
                "@id": "dtmi:com:microsoft:akri:AssetManagementGroup;1",
                "name": "managementGroups",
                "schema": {
                  "@type": "Array",
                  "elementSchema": {
                    "@type": "Object",
                    "fields": [
                      {
                        "@type": "Field",
                        "@id": "dtmi:com:microsoft:akri:AssetManagementGroupAction;1",
                        "name": "actions",
                        "schema": {
                          "@type": "Array",
                          "elementSchema": {
                            "@type": "Object",
                            "fields": [
                              {
                                "@type": "Field",
                                "name": "actionConfiguration",
                                "schema": "string"
                              },
                              {
                                "@type": ["Field", "Required"],
                                "name": "actionType",
                                "schema": "dtmi:com:microsoft:akri:AssetManagementGroupActionType;1"
                              },
                              {
                                "@type": ["Field", "Required"],
                                "name": "name",
                                "schema": "string"
                              },
                              {
                                "@type": ["Field", "Required"],
                                "name": "targetUri",
                                "schema": "string"
                              },
                              {
                                "@type": "Field",
                                "name": "timeOutInSeconds",
                                "schema": "unsignedInteger"
                              },
                              {
                                "@type": "Field",
                                "name": "topic",
                                "schema": "string"
                              },
                              {
                                "@type": "Field",
                                "name": "typeRef",
                                "schema": "string"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "@type": "Field",
                        "name": "defaultTimeOutInSeconds",
                        "schema": "unsignedInteger"
                      },
                      {
                        "@type": "Field",
                        "name": "defaultTopic",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "managementGroupConfiguration",
                        "schema": "string"
                      },
                      {
                        "@type": ["Field", "Required"],
                        "name": "name",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "typeRef",
                        "schema": "string"
                      }
                    ]
                  }
                }
              },
              {
                "@type": "Field",
                "name": "manufacturer",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "manufacturerUri",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "model",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "productCode",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "serialNumber",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "softwareRevision",
                "schema": "string"
              },
              {
                "@type": "Field",
                "@id": "dtmi:com:microsoft:akri:AssetStream;1",
                "name": "streams",
                "schema": {
                  "@type": "Array",
                  "elementSchema": {
                    "@type": "Object",
                    "fields": [
                      {
                        "@type": "Field",
                        "name": "destinations",
                        "schema": {
                          "@type": "Array",
                          "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
                        }
                      },
                      {
                        "@type": ["Field", "Required"],
                        "name": "name",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "streamConfiguration",
                        "schema": "string"
                      },
                      {
                        "@type": "Field",
                        "name": "typeRef",
                        "schema": "string"
                      }
                    ]
                  }
                }
              },
              {
                "@type": "Field",
                "name": "uuid",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "version",
                "schema": "unsignedLong"
              }
            ]
          }
        },
        {
          "@type": "Field",
          "name": "status",
          "schema": "dtmi:com:microsoft:akri:AssetStatus;1"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:AssetDeviceRef;1",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "deviceName",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "endpointName",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DeviceOutboundEndpoint;1",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "address",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "endpointType",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DatasetDestination;1",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "configuration",
          "schema": "dtmi:com:microsoft:akri:DestinationConfiguration;1"
        },
        {
          "@type": ["Field", "Required"],
          "name": "target",
          "schema": "dtmi:com:microsoft:akri:DatasetTarget;1"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:EventStreamDestination",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "configuration",
          "schema": "dtmi:com:microsoft:akri:DestinationConfiguration;1"
        },
        {
          "@type": ["Field", "Required"],
          "name": "target",
          "schema": "dtmi:com:microsoft:akri:EventStreamTarget;1"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DestinationConfiguration;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "key",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "path",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "qos",
          "schema": "dtmi:com:microsoft:akri:Qos;1"
        },
        {
          "@type": "Field",
          "name": "retain",
          "schema": "dtmi:com:microsoft:akri:Retain;1"
        },
        {
          "@type": "Field",
          "name": "topic",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "ttl",
          "schema": "unsignedLong"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:Qos;1",
      "@type": "Enum",
      "valueSchema": "string",
      "enumValues": [
        {
          "name": "Qos0",
          "enumValue": "Qos0"
        },
        {
          "name": "Qos1",
          "enumValue": "Qos1"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:Retain;1",
      "@type": "Enum",
      "valueSchema": "string",
      "enumValues": [
        {
          "name": "Keep",
          "enumValue": "Keep"
        },
        {
          "name": "Never",
          "enumValue": "Never"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:Topic;1",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "path",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "retain",
          "schema": "dtmi:com:microsoft:akri:Retain;1"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:MessageSchemaReference;1",
      "@type": "Object",
      "fields": [
        {
          "@type": ["Field", "Required"],
          "name": "schemaName",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "schemaRegistryNamespace",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "schemaVersion",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:ConfigError;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "code",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "details",
          "schema": {
            "@type": "Array",
            "elementSchema": {
              "@type": "Object",
              "fields": [
                {
                  "@type": "Field",
                  "name": "code",
                  "schema": "string"
                },
                {
                  "@type": "Field",
                  "name": "correlationId",
                  "schema": "string"
                },
                {
                  "@type": "Field",
                  "name": "info",
                  "schema": "string"
                },
                {
                  "@type": "Field",
                  "name": "message",
                  "schema": "string"
                }
              ]
            }
          }
        },
        {
          "@type": "Field",
          "name": "innerError",
          "schema": {
            "@type": "Map",
            "mapKey": {
              "name": "innerErrorKey",
              "schema": "string"
            },
            "mapValue": {
              "name": "innerErrorValue",
              "schema": "string"
            }
          }
        },
        {
          "@type": "Field",
          "name": "message",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DatasetTarget;1",
      "@type": "Enum",
      "valueSchema": "string",
      "enumValues": [
        {
          "name": "Mqtt",
          "enumValue": "Mqtt"
        },
        {
          "name": "BrokerStateStore",
          "enumValue": "BrokerStateStore"
        },
        {
          "name": "Storage",
          "enumValue": "Storage"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:EventStreamTarget;1",
      "@type": "Enum",
      "valueSchema": "string",
      "enumValues": [
        {
          "name": "Mqtt",
          "enumValue": "Mqtt"
        },
        {
          "name": "Storage",
          "enumValue": "Storage"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:AssetManagementGroupActionType;1",
      "@type": "Enum",
      "valueSchema": "string",
      "enumValues": [
        {
          "name": "Read",
          "enumValue": "Read"
        },
        {
          "name": "Write",
          "enumValue": "Write"
        },
        {
          "name": "Call",
          "enumValue": "Call"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DeviceStatus;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "@id": "dtmi:com:microsoft:akri:DeviceStatusConfig;1",
          "name": "config",
          "schema": {
            "@type": "Object",
            "fields": [
              {
                "@type": "Field",
                "name": "error",
                "schema": "dtmi:com:microsoft:akri:ConfigError;1"
              },
              {
                "@type": "Field",
                "name": "lastTransitionTime",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "version",
                "schema": "unsignedLong"
              }
            ]
          }
        },
        {
          "@type": "Field",
          "@id": "dtmi:com:microsoft:akri:DeviceStatusEndpoint;1",
          "name": "endpoints",
          "schema": {
            "@type": "Object",
            "fields": [
              {
                "@type": "Field",
                "@id": "dtmi:com:microsoft:akri:DeviceStatusInboundEndpoint;1",
                "name": "inbound",
                "schema": {
                  "@type": "Map",
                  "mapKey": {
                    "name": "inboundEndpointName",
                    "schema": "string"
                  },
                  "mapValue": {
                    "name": "inboundEndpointStatus",
                    "schema": {
                      "@type": "Object",
                      "fields": [
                        {
                          "@type": "Field",
                          "name": "error",
                          "schema": "dtmi:com:microsoft:akri:ConfigError;1"
                        }
                      ]
                    }
                  }
                }
              }
            ]
          }
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:AssetStatus;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "@id": "dtmi:com:microsoft:akri:AssetConfigStatus;1",
          "name": "config",
          "schema": {
            "@type": "Object",
            "fields": [
              {
                "@type": "Field",
                "name": "error",
                "schema": "dtmi:com:microsoft:akri:ConfigError;1"
              },
              {
                "@type": "Field",
                "name": "lastTransitionTime",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "version",
                "schema": "unsignedLong"
              }
            ]
          }
        },
        {
          "@type": "Field",
          "@id": "dtmi:com:microsoft:akri:AssetDatasetStatus;1",
          "name": "datasets",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:AssetDatasetEventStreamStatus;1"
          }
        },
        {
          "@type": "Field",
          "@id": "dtmi:com:microsoft:akri:AssetEventStatus;1",
          "name": "events",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:AssetDatasetEventStreamStatus;1"
          }
        },
        {
          "@type": "Field",
          "@id": "dtmi:com:microsoft:akri:AssetManagementGroupStatus;1",
          "name": "managementGroups",
          "schema": {
            "@type": "Array",
            "elementSchema": {
              "@type": "Object",
              "fields": [
                {
                  "@type": "Field",
                  "@id": "dtmi:com:microsoft:akri:AssetManagementGroupActionStatus;1",
                  "name": "actions",
                  "schema": {
                    "@type": "Array",
                    "elementSchema": {
                      "@type": "Object",
                      "fields": [
                        {
                          "@type": "Field",
                          "name": "error",
                          "schema": "dtmi:com:microsoft:akri:ConfigError;1"
                        },
                        {
                          "@type": ["Field", "Required"],
                          "name": "name",
                          "schema": "string"
                        },
                        {
                          "@type": "Field",
                          "name": "requestMessageSchemaReference",
                          "schema": "dtmi:com:microsoft:akri:MessageSchemaReference;1"
                        },
                        {
                          "@type": "Field",
                          "name": "responseMessageSchemaReference",
                          "schema": "dtmi:com:microsoft:akri:MessageSchemaReference;1"
                        }
                      ]
                    }
                  }
                },
                {
                  "@type": ["Field", "Required"],
                  "name": "name",
                  "schema": "string"
                }
              ]
            }
          }
        },
        {
          "@type": "Field",
          "@id": "dtmi:com:microsoft:akri:AssetStreamStatus;1",
          "name": "streams",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:AssetDatasetEventStreamStatus;1"
          }
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:AssetDatasetEventStreamStatus;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "error",
          "schema": "dtmi:com:microsoft:akri:ConfigError;1"
        },
        {
          "@type": "Field",
          "name": "messageSchemaReference",
          "schema": "dtmi:com:microsoft:akri:MessageSchemaReference;1"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAsset;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "assetTypeRefs",
          "schema": {
            "@type": "Array",
            "elementSchema": "string"
          }
        },
        {
          "@type": "Field",
          "name": "attributes",
          "schema": {
            "@type": "Map",
            "mapKey": {
              "name": "attributeKey",
              "schema": "string"
            },
            "mapValue": {
              "name": "attributeValue",
              "schema": "string"
            }
          }
        },
        {
          "@type": "Field",
          "name": "datasets",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetDataset;1"
          }
        },
        {
          "@type": "Field",
          "name": "defaultDatasetsConfiguration",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "defaultDatasetsDestinations",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DatasetDestination;1"
          }
        },
        {
          "@type": "Field",
          "name": "defaultEventsConfiguration",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "defaultEventsDestinations",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
          }
        },
        {
          "@type": "Field",
          "name": "defaultManagementGroupsConfiguration",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "defaultStreamsConfiguration",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "defaultStreamsDestinations",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
          }
        },
        {
          "@type": ["Field", "Required"],
          "name": "deviceRef",
          "schema": "dtmi:com:microsoft:akri:AssetDeviceRef;1"
        },
        {
          "@type": "Field",
          "name": "documentationUri",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "events",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetEvent;1"
          }
        },
        {
          "@type": "Field",
          "name": "hardwareRevision",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "managementGroups",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetManagementGroup;1"
          }
        },
        {
          "@type": "Field",
          "name": "manufacturer",
          "description": "Asset manufacturer name.",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "manufacturerUri",
          "description": "URI to the manufacturer of the asset.",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "model",
          "description": "Asset model name.",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "productCode",
          "description": "Asset product code.",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "serialNumber",
          "description": "Asset serial number.",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "softwareRevision",
          "description": "Revision number of the software.",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "streams",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetStream;1"
          }
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetDataset;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "dataPoints",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetDatasetDataPoint;1"
          }
        },
        {
          "@type": "Field",
          "name": "dataSource",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "datasetConfiguration",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "destinations",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DatasetDestination;1"
          }
        },
        {
          "@type": "Field",
          "name": "lastUpdatedOn",
          "schema": "dateTime"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "typeRef",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetDatasetDataPoint;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "dataPointConfiguration",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "dataSource",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "lastUpdatedOn",
          "schema": "dateTime"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "typeRef",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetEvent;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "dataPoints",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetEventDataPoint;1"
          }
        },
        {
          "@type": "Field",
          "name": "destinations",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
          }
        },
        {
          "@type": "Field",
          "name": "eventConfiguration",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "eventNotifier",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "lastUpdatedOn",
          "schema": "dateTime"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "typeRef",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetEventDataPoint;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "dataPointConfiguration",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "dataSource",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "lastUpdatedOn",
          "schema": "dateTime"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetManagementGroup;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "actions",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetManagementGroupAction;1"
          }
        },
        {
          "@type": "Field",
          "name": "defaultTimeOutInSeconds",
          "schema": "unsignedInteger"
        },
        {
          "@type": "Field",
          "name": "defaultTopic",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "lastUpdatedOn",
          "schema": "dateTime"
        },
        {
          "@type": "Field",
          "name": "managementGroupConfiguration",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "typeRef",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetManagementGroupAction;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "actionConfiguration",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "actionType",
          "schema": "dtmi:com:microsoft:akri:AssetManagementGroupActionType;1"
        },
        {
          "@type": "Field",
          "name": "lastUpdatedOn",
          "schema": "dateTime"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": ["Field", "Required"],
          "name": "targetUri",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "timeOutInSeconds",
          "schema": "unsignedInteger"
        },
        {
          "@type": "Field",
          "name": "topic",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "typeRef",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetStream;1",
      "@type": "Object",
      "fields": [
        {
          "@type": "Field",
          "name": "destinations",
          "schema": {
            "@type": "Array",
            "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
          }
        },
        {
          "@type": "Field",
          "name": "lastUpdatedOn",
          "schema": "dateTime"
        },
        {
          "@type": ["Field", "Required"],
          "name": "name",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "streamConfiguration",
          "schema": "string"
        },
        {
          "@type": "Field",
          "name": "typeRef",
          "schema": "string"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:DiscoveredAssetResponse;1",
      "@type": "Object",
      "fields": [
        {
          "@type": [ "Field", "Required" ],
          "name": "name",
          "schema": "string"
        },
        {
          "@type":[ "Field", "Required" ],
          "@id": "dtmi:com:microsoft:akri:DiscoveredAssetResponseSpecification;1",
          "name": "specification",
          "schema": {
            "@type": "Object",
            "fields": [
              {
                "@type": "Field",
                "name": "assetTypeRefs",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "string"
                }
              },
              {
                "@type": "Field",
                "name": "attributes",
                "schema": {
                  "@type": "Map",
                  "mapKey": {
                    "name": "attributeKey",
                    "schema": "string"
                  },
                  "mapValue": {
                    "name": "attributeValue",
                    "schema": "string"
                  }
                }
              },
              {
                "@type": "Field",
                "name": "datasets",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetDataset;1"
                }
              },
              {
                "@type": "Field",
                "name": "defaultDatasetsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultDatasetsDestinations",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:DatasetDestination;1"
                }
              },
              {
                "@type": "Field",
                "name": "defaultEventsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultEventsDestinations",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
                }
              },
              {
                "@type": "Field",
                "name": "defaultManagementGroupsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultStreamsConfiguration",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "defaultStreamsDestinations",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:EventStreamDestination"
                }
              },
              {
                "@type": ["Field", "Required"],
                "name": "deviceRef",
                "schema": "dtmi:com:microsoft:akri:AssetDeviceRef;1"
              },
              {
                "@type": ["Field", "Required"],
                "name": "discoveryId",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "documentationUri",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "events",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetEvent;1"
                }
              },
              {
                "@type": "Field",
                "name": "hardwareRevision",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "managementGroups",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetManagementGroup;1"
                }
              },
              {
                "@type": "Field",
                "name": "manufacturer",
                "description": "Asset manufacturer name.",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "manufacturerUri",
                "description": "URI to the manufacturer of the asset.",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "model",
                "description": "Asset model name.",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "productCode",
                "description": "Asset product code.",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "serialNumber",
                "description": "Asset serial number.",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "softwareRevision",
                "description": "Revision number of the software.",
                "schema": "string"
              },
              {
                "@type": "Field",
                "name": "streams",
                "schema": {
                  "@type": "Array",
                  "elementSchema": "dtmi:com:microsoft:akri:DiscoveredAssetStream;1"
                }
              },
              {
                "@type": [ "Field", "Required" ],
                "name": "version",
                "schema": "unsignedLong"
              }
            ]
          }
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:NotificationPreference;1",
      "@type": "Enum",
      "valueSchema": "string",
      "enumValues": [
        {
          "name": "On",
          "enumValue": "On"
        },
        {
          "name": "Off",
          "enumValue": "Off"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:NotificationPreferenceResponse;1",
      "@type": "Enum",
      "valueSchema": "string",
      "enumValues": [
        {
          "name": "Accepted",
          "enumValue": "Accepted"
        },
        {
          "name": "Failed",
          "enumValue": "Failed"
        }
      ]
    },
    {
      "@id": "dtmi:com:microsoft:akri:AkriServiceError;1",
      "@type": [ "Object", "Error" ],
      "fields": [
        {
          "@type": [ "Field", "Required" ],
          "name": "code",
          "schema": "string"
        },
        {
          "@type": [ "Field", "Required", "ErrorMessage" ],
          "name": "message",
          "schema": "string"
        },
        {
          "@type": [ "Field", "Required" ],
          "name": "timestamp",
          "schema": "dateTime"
        }
      ]
    }
  ]
}
